"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5146],{41024:function(e,r,n){n.d(r,{J:function(){return m},B:function(){return b}});var t=n(59499),a=n(4730),s=n(1279),o=n(29630),i=n(85893),l=["value","symbol","visibleDecimals","compact","percent","symbolsVariant","symbolsColor","roundDown","compactThreshold"];function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function d(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var u=["","K","M","B","T","P","E","Z","Y"],m=function(e){var r=e.value,n=e.visibleDecimals,t=void 0===n?2:n,a=e.roundDown,o=e.compactThreshold,i=(0,s.hE)(r),l=i.toFixed(0).length;o&&Number(r)<=o&&(l=0);var c=Math.min(Math.floor(l?(l-1)/3:0),u.length-1),d=u[c],m=(0,s.pV)(i,3*c).toNumber();return a&&(m=Math.trunc(Number(m)*Math.pow(10,t))/Math.pow(10,t)),{prefix:new Intl.NumberFormat("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}).format(m),postfix:d}};function x(e){var r=e.value,n=e.visibleDecimals,t=e.roundDown,a=m({value:r,visibleDecimals:n,roundDown:t}),s=a.prefix,o=a.postfix;return(0,i.jsxs)(i.Fragment,{children:[s,o]})}function b(e){var r=e.value,n=e.symbol,t=e.visibleDecimals,s=e.compact,c=e.percent,u=e.symbolsVariant,m=e.symbolsColor,b=e.roundDown,p=e.compactThreshold,v=(0,a.Z)(e,l),h=c?100*Number(r):Number(r),f=null!==t&&void 0!==t?t:0;0===h?f=0:void 0===t&&(f=h>1||c||"USD"===n?2:7);var y=Math.pow(10,-f),j=0!==h&&Math.abs(h)<Math.abs(y),w=j?y:h,g=!1!==s&&(s||h>99999);return b&&!g&&(w=Math.trunc(Number(w)*Math.pow(10,f))/Math.pow(10,f)),(0,i.jsxs)(o.Z,d(d({},v),{},{sx:d({display:"inline-flex",flexDirection:"row",alignItems:"center",position:"relative"},v.sx),noWrap:!0,children:[j&&(0,i.jsx)(o.Z,{component:"span",sx:{mr:.5},variant:u||v.variant,color:m||"text.secondary",children:"<"}),"usd"===(null===n||void 0===n?void 0:n.toLowerCase())&&!c&&(0,i.jsx)(o.Z,{component:"span",sx:{mr:.5},variant:u||v.variant,color:m||"text.secondary",children:"$"}),g?(0,i.jsx)(x,{value:w,visibleDecimals:f,roundDown:b,compactThreshold:p}):new Intl.NumberFormat("en-US",{maximumFractionDigits:f,minimumFractionDigits:f}).format(w),c&&(0,i.jsx)(o.Z,{component:"span",sx:{ml:.5},variant:u||v.variant,color:m||"text.secondary",children:"%"}),"usd"!==(null===n||void 0===n?void 0:n.toLowerCase())&&"undefined"!==typeof n&&(0,i.jsx)(o.Z,{component:"span",sx:{ml:.5},variant:u||v.variant,color:m||"text.secondary",children:n})]}))}},25146:function(e,r,n){n.r(r),n.d(r,{ClaimRewardsModal:function(){return F}});var t,a=n(67294),s=n(8195),o=n(31959),i=n(49501),l=n(75331),c=n(1279),d=n(29630),u=n(30120),m=n(41024),x=n(92391),b=n(72667),p=n(34220),v=n(46930),h=n(77537),f=n(25298),y=n(63491),j=n(67916),w=n(93608),g=n(20644),C=n(78944),N=n(10343),O=n(50029),D=n(87794),T=n.n(D),Z=n(89291),S=n(16376),k=n(67489),I=n(85893),E=function(e){var r=e.isWrongNetwork,n=e.blocked,t=e.selectedReward,a=(0,S.Yh)((function(e){return e.claimRewards})),s=(0,Z.Q)({protocolAction:l.UQ.claimRewards,eventTxInfo:{assetName:t.symbol,amount:t.balance},tryPermit:!1,handleGetTxns:function(){var e=(0,O.Z)(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a({isWrongNetwork:r,blocked:n,selectedReward:t}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:0===Object.keys(t).length||n,deps:[t]}),o=s.action,c=s.loadingTxns,d=s.mainTxState,u=s.requiresApproval;return(0,I.jsx)(k.B,{requiresApproval:u,blocked:n,preparingTransactions:c,mainTxState:d,handleAction:o,actionText:"all"===t.symbol?(0,I.jsx)(i.cC,{id:"Claim all"}):(0,I.jsx)(i.cC,{id:"Claim {0}",values:{0:t.symbol}}),actionInProgressText:(0,I.jsx)(i.cC,{id:"Claiming"}),isWrongNetwork:r})},M=n(4535),U=n(44373),A=n(55343),R=n(31538),B=n(92012),P=function(e){var r=e.rewards,n=e.selectedReward,t=e.setSelectedReward;return(0,I.jsxs)(A.Z,{sx:{mb:1,width:"100%"},children:[(0,I.jsx)(M.Z,{sx:{mb:1,color:"text.secondary"},children:(0,I.jsx)(i.cC,{id:"Reward(s) to claim"})}),(0,I.jsxs)(B.Z,{value:n,onChange:function(e){return t(e.target.value)},sx:{width:"100%",height:"44px",borderRadius:"6px",borderColor:"divider",outline:"none !important",color:"text.primary",".MuiOutlinedInput-input":{backgroundColor:"transparent"},"&:hover .MuiOutlinedInput-notchedOutline, .MuiOutlinedInput-notchedOutline":{borderColor:"divider",outline:"none !important",borderWidth:"1px"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"divider",borderWidth:"1px"},".MuiSelect-icon":{color:"text.primary"}},native:!1,renderValue:function(e){if("all"===e)return(0,I.jsx)(d.Z,{color:"text.primary",children:(0,I.jsx)(i.cC,{id:"Claim all rewards"})});var n=r.find((function(r){return r.symbol===e}));return(0,I.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(b.T1,{symbol:n.symbol,sx:{mr:2,fontSize:"16px"}}),(0,I.jsx)(d.Z,{color:"text.primary",children:n.symbol})]})},children:[(0,I.jsx)(R.Z,{value:"all",children:(0,I.jsx)(d.Z,{variant:"subheader1",children:(0,I.jsx)(i.cC,{id:"Claim all rewards"})})}),(0,I.jsx)(U.Z,{}),r.map((function(e){return(0,I.jsx)(R.Z,{value:e.symbol,children:(0,I.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(b.T1,{symbol:e.symbol,sx:{fontSize:"24px",mr:3}}),(0,I.jsx)(d.Z,{variant:"subheader1",sx:{mr:1},children:e.symbol}),(0,I.jsx)(d.Z,{component:"span",sx:{display:"inline-flex",alignItems:"center"},variant:"caption",color:"text.muted",children:"~"}),(0,I.jsx)(m.B,{value:Number(e.balanceUsd),variant:"caption",compact:!0,symbol:"USD",symbolsColor:"text.muted",color:"text.muted"})]})},"reward-token-".concat(e.symbol))}))]})]})};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE"}(t||(t={}));var _=function(){var e=(0,s.vR)(),r=e.gasLimit,n=e.mainTxState,o=e.txError,O=(0,p.HT)(),D=O.user,T=O.reserves,Z=(0,v.f)(),S=Z.currentChainId,k=Z.currentMarketData,M=(0,h.Z)(),U=M.chainId,A=M.readOnlyModeAddress,R=(0,a.useState)("0"),B=R[0],_=R[1],F=(0,a.useState)("all"),L=F[0],W=F[1],V=(0,a.useState)([]),G=V[0],H=V[1],Y=(0,a.useState)(),z=Y[0],Q=Y[1],q=(0,f.Mo)(S);(0,a.useEffect)((function(){var e=[],r=Number(B),n=[];if(Object.keys(D.calculatedUserIncentives).forEach((function(t){var a=D.calculatedUserIncentives[t],s=(0,c.Fv)(a.claimableRewards,a.rewardTokenDecimals),o=0;if(!k.v3&&Number(s)>0)if(k.chainId===l.a_.mainnet){var i=T.find((function(e){return"YIELD"===e.symbol}));o=i?Number(i.priceInUSD):0}else T.forEach((function(e){e.isWrappedBaseAsset&&(o=Number(e.priceInUSD))}));else o=Number(a.rewardPriceFeed);var d=Number(s)*o;d>0&&(a.assets.forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),e.push({assets:a.assets,incentiveControllerAddress:a.incentiveControllerAddress,symbol:a.rewardTokenSymbol,balance:s,balanceUsd:d.toString(),rewardTokenAddress:t}),r+=Number(d))})),1===e.length)W(e[0].symbol);else if(e.length>1&&!K){var t={assets:n,incentiveControllerAddress:e[0].incentiveControllerAddress,symbol:"all",balance:"0",balanceUsd:r.toString(),rewardTokenAddress:""};W("all"),Q(t)}H(e),_(r.toString())}),[]);var J=void 0;"0"===B&&(J=t.NOT_ENOUGH_BALANCE);var X=S!==U,K="all"===L?z:G.find((function(e){return e.symbol===L}));return o&&o.blocking?(0,I.jsx)(y.D,{txError:o}):n.success?(0,I.jsx)(w.R,{action:(0,I.jsx)(i.cC,{id:"Claimed"}),amount:null===K||void 0===K?void 0:K.balanceUsd}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(C.E,{title:"Claim rewards"}),X&&!A&&(0,I.jsx)(N.I,{networkName:q.name,chainId:S}),void 0!==J&&(0,I.jsx)(d.Z,{variant:"helperText",color:"error.main",children:J===t.NOT_ENOUGH_BALANCE?(0,I.jsx)(i.cC,{id:"Your reward balance is 0"}):null}),G.length>1&&(0,I.jsx)(P,{rewards:G,selectedReward:L,setSelectedReward:W}),K&&(0,I.jsxs)(g.m6,{gasLimit:r,children:["all"===L&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(x.X,{caption:(0,I.jsx)(i.cC,{id:"Balance"}),captionVariant:"description",align:"flex-start",mb:"all"!==K.symbol?0:4,children:(0,I.jsx)(u.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:G.map((function(e){return(0,I.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",mb:4},children:[(0,I.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(b.T1,{symbol:e.symbol,sx:{mr:1,fontSize:"16px"}}),(0,I.jsx)(m.B,{value:Number(e.balance),variant:"secondary14"}),(0,I.jsx)(d.Z,{ml:1,variant:"secondary14",children:e.symbol})]}),(0,I.jsx)(m.B,{value:Number(e.balanceUsd),variant:"helperText",compact:!0,symbol:"USD",color:"text.secondary"})]},"claim-".concat(e.symbol))}))})}),(0,I.jsx)(g.oD,{description:(0,I.jsx)(i.cC,{id:"Total worth"}),value:B})]}),"all"!==L&&(0,I.jsx)(g.XJ,{symbol:(0,I.jsx)(b.T1,{symbol:K.symbol}),futureValue:K.balance,futureValueUSD:K.balanceUsd,description:(0,I.jsx)(i.cC,{id:"{0} Balance",values:{0:K.symbol}})})]}),o&&(0,I.jsx)(j.Q,{txError:o}),(0,I.jsx)(E,{isWrongNetwork:X,selectedReward:null!==K&&void 0!==K?K:{},blocked:void 0!==J})]})},F=function(){var e=(0,s.vR)(),r=e.type,n=e.close;return(0,I.jsx)(o.P,{open:r===s.w8.ClaimRewards,setOpen:n,children:(0,I.jsx)(_,{})})}}}]);