"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9075],{62753:function(e,r,t){var n=t(64836);r.Z=void 0;var s=n(t(64938)),o=t(85893),i=(0,s.default)((0,o.jsx)("path",{d:"m19.77 7.23.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77zM12 10H6V5h6v5zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"LocalGasStation");r.Z=i},9144:function(e,r,t){var n=t(63366),s=t(87462),o=t(67294),i=t(95408),a=t(98700),c=t(39707),u=t(59766),l=t(81719),p=t(78884),d=t(85893);const f=["component","direction","spacing","divider","children"];function m(e,r){const t=o.Children.toArray(e).filter(Boolean);return t.reduce(((e,n,s)=>(e.push(n),s<t.length-1&&e.push(o.cloneElement(r,{key:`separator-${s}`})),e)),[])}const v=(0,l.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,r)=>[r.root]})((({ownerState:e,theme:r})=>{let t=(0,s.Z)({display:"flex",flexDirection:"column"},(0,i.k9)({theme:r},(0,i.P$)({values:e.direction,breakpoints:r.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const n=(0,a.hB)(r),s=Object.keys(r.breakpoints.values).reduce(((r,t)=>(("object"===typeof e.spacing&&null!=e.spacing[t]||"object"===typeof e.direction&&null!=e.direction[t])&&(r[t]=!0),r)),{}),o=(0,i.P$)({values:e.direction,base:s}),c=(0,i.P$)({values:e.spacing,base:s});"object"===typeof o&&Object.keys(o).forEach(((e,r,t)=>{if(!o[e]){const n=r>0?o[t[r-1]]:"column";o[e]=n}}));const l=(r,t)=>{return{"& > :not(style) + :not(style)":{margin:0,[`margin${s=t?o[t]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[s]}`]:(0,a.NA)(n,r)}};var s};t=(0,u.Z)(t,(0,i.k9)({theme:r},c,l))}return t=(0,i.dt)(r.breakpoints,t),t})),h=o.forwardRef((function(e,r){const t=(0,p.Z)({props:e,name:"MuiStack"}),o=(0,c.Z)(t),{component:i="div",direction:a="column",spacing:u=0,divider:l,children:h}=o,b=(0,n.Z)(o,f),y={direction:a,spacing:u};return(0,d.jsx)(v,(0,s.Z)({as:i,ownerState:y,ref:r},b,{children:l?m(h,l):h}))}));r.Z=h},99528:function(e,r,t){t.r(r),t.d(r,{MigrateV3Modal:function(){return T}});var n=t(67294),s=t(31959),o=t(8195),i=t(49501),a=t(75331),c=t(30120),u=t(75084),l=t(43478),p=t(46930),d=t(77537),f=t(16376),m=t(67728),v=t(25298),h=t(63491),b=t(67916),y=t(93608),g=t(20644),k=t(78944),x=t(10343),w=t(50029),j=t(87794),O=t.n(j),Z=t(89291),P=t(67489),S=t(85893),D=function(e){var r=e.isWrongNetwork,t=e.blocked,n=(0,f.Yh)((function(e){return e.migrateWithPermits})),s=(0,f.Yh)((function(e){return e.migrateWithoutPermits})),o=(0,f.Yh)((function(e){return e.getApprovePermitsForSelectedAssets})),c=(0,Z.Q)({handleGetTxns:function(){var e=(0,w.Z)(O().mark((function e(){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),handleGetPermitTxns:function(){var e=(0,w.Z)(O().mark((function e(r,t){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(r,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),tryPermit:!0,permitAction:a.UQ.migrateV3}),u=c.approval,l=c.action,p=c.loadingTxns,d=c.requiresApproval,m=c.mainTxState,v=c.approvalTxState,h=function(){var e=(0,w.Z)(O().mark((function e(){var r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:r=e.sent,u(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.jsx)(P.B,{requiresApproval:d,preparingTransactions:p,mainTxState:m,approvalTxState:v,isWrongNetwork:r,handleAction:l,handleApproval:h,blocked:t,actionText:(0,S.jsx)(i.cC,{id:"Migrate"}),actionInProgressText:(0,S.jsx)(i.cC,{id:"Migrating"}),tryPermit:!0})},R=t(29630),C=t(41024),B=t(92391),E=t(72667),M=function(e){var r=e.caption,t=e.assets;return(0,S.jsx)(B.X,{caption:r,captionVariant:"description",align:"flex-start",sx:{mb:6,"&:last-of-type":{mb:0}},children:t.length?(0,S.jsx)(c.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:t.map((function(e){return e?(0,S.jsxs)(c.Z,{sx:{mb:2,display:"flex",alignItems:"flex-end",flexDirection:"column"},children:[(0,S.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(E.T1,{symbol:e.iconSymbol,sx:{mr:1,fontSize:"16px"}}),(0,S.jsx)(C.B,{value:e.amount,variant:"secondary14",compact:!0}),(0,S.jsx)(R.Z,{ml:1,variant:"secondary14",children:e.symbol})]}),(0,S.jsx)(C.B,{value:e.amountInUSD,variant:"helperText",compact:!0,symbol:"USD",color:"text.secondary"})]},e.underlyingAsset):(0,S.jsx)(S.Fragment,{})}))}):(0,S.jsx)(R.Z,{children:"\u2014"})})},A=function(){var e=(0,l.p)(10),r=(0,f.Yh)((0,n.useCallback)((function(r){return{supplyPositions:(0,m.B9)(r,e),borrowPositions:(0,m.hA)(r,e)}}),[e])),t=r.supplyPositions,s=r.borrowPositions,w=(0,o.vR)(),j=w.gasLimit,O=w.mainTxState,Z=w.txError,P=(0,p.f)().currentChainId,R=(0,d.Z)(),C=R.chainId,B=R.readOnlyModeAddress,E=(0,v.Mo)(P),A=t.map((function(e){return{underlyingAsset:e.underlyingAsset,iconSymbol:e.reserve.iconSymbol,symbol:e.reserve.symbol,amount:e.underlyingBalance,amountInUSD:e.underlyingBalanceUSD}})),T=s.map((function(e){return{underlyingAsset:e.debtKey,iconSymbol:e.reserve.iconSymbol,symbol:e.reserve.symbol,amount:e.interestRate==a.tk.Stable?e.stableBorrows:e.variableBorrows,amountInUSD:e.interestRate==a.tk.Stable?e.stableBorrowsUSD:e.variableBorrowsUSD}})),I=P!==C;if(Z&&Z.blocking)return(0,S.jsx)(h.D,{txError:Z});return O.success?(0,S.jsx)(y.R,{customAction:(0,S.jsx)(c.Z,{mt:5,children:(0,S.jsx)(u.Z,{variant:"gradient",size:"medium",onClick:function(){},children:(0,S.jsx)(i.cC,{id:"Go to V3 Dashboard"})})}),customText:(0,S.jsx)(i.cC,{id:"Selected assets have successfully migrated. Visit the Market Dashboard to see them."}),action:(0,S.jsx)(i.cC,{id:"Migrated"})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(k.E,{title:"Migrate to V3"}),I&&!B&&(0,S.jsx)(x.I,{networkName:E.name,chainId:P}),(0,S.jsxs)(g.m6,{gasLimit:j,children:[(0,S.jsx)(M,{caption:(0,S.jsx)(i.cC,{id:"Selected supply assets"}),assets:A}),(0,S.jsx)(M,{caption:(0,S.jsx)(i.cC,{id:"Selected borrow assets"}),assets:T})]}),Z&&(0,S.jsx)(b.Q,{txError:Z}),(0,S.jsx)(D,{isWrongNetwork:I,blocked:!1})]})},T=function(){var e=(0,o.vR)(),r=e.type,t=e.close;return(0,S.jsx)(s.P,{open:r===o.w8.V3Migration,setOpen:t,children:(0,S.jsx)(A,{})})}},82482:function(e,r,t){t.d(r,{P:function(){return y}});var n=t(80854),s=t(1279),o=t(81206),i=t(82403),a=t(70794),c=t(16376),u=t(25298),l=t(52369),p=t(59499),d=t(87669),f=t(15591),m=t(12987);function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var h=function(e,r,t){var n=(0,m.z)().poolTokensBalanceService;return(0,d.h)({queries:e.map((function(e){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach((function(r){(0,p.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({queryKey:f.B.poolTokens(r,e),queryFn:function(){return n.getPoolTokensBalances(e,r)},enabled:!!r,refetchInterval:f.g},t)}))})},b=function(e){var r=(0,c.Yh)((function(e){return e.account})),t=h(e,r),p=(0,l.T)(e),d=t.find((function(e){return e.isLoading}))||p.find((function(e){return e.isLoading}));return{walletBalances:p.map((function(r,c){var l;return function(e){var r=e.reservesHumanized,t=e.balances,c=e.marketData,l=(null===r||void 0===r?void 0:r.reservesData)||[],p=(null===r||void 0===r?void 0:r.baseCurrencyData)||{marketReferenceCurrencyDecimals:0,marketReferenceCurrencyPriceInUsd:"0",networkBaseTokenPriceInUsd:"0",networkBaseTokenPriceDecimals:0},d=!0;return{walletBalances:(null!==t&&void 0!==t?t:[]).reduce((function(e,r){var t=l.find((function(e){var t;return r.address===n.hP.toLowerCase()?e.symbol.toLowerCase()===(null===(t=u.m5[c.chainId].wrappedBaseAssetSymbol)||void 0===t?void 0:t.toLowerCase()):e.underlyingAsset.toLowerCase()===r.address}));return"0"!==r.amount&&(d=!1),t&&(e[r.address]={amount:(0,s.Fv)(r.amount,t.decimals),amountUSD:(0,o.Z)({amount:new a.O(r.amount),currencyDecimals:t.decimals,priceInMarketReferenceCurrency:t.priceInMarketReferenceCurrency,marketReferenceCurrencyDecimals:p.marketReferenceCurrencyDecimals,normalizedMarketReferencePriceInUsd:(0,s.Fv)(p.marketReferenceCurrencyPriceInUsd,i.$3)})}),e}),{}),hasEmptyWallet:d}}({reservesHumanized:r.data,balances:null===(l=t[c])||void 0===l?void 0:l.data,marketData:e[c]})})),isLoading:d}},y=function(e){var r=b([e]),t=r.walletBalances,n=r.isLoading;return{walletBalances:t[0].walletBalances,hasEmptyWallet:t[0].hasEmptyWallet,loading:n}}},52369:function(e,r,t){t.d(r,{T:function(){return c},J:function(){return u}});var n=t(59499),s=t(87669),o=t(15591),i=t(12987);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var c=function(e,r){var t=(0,i.z)().uiPoolService;return(0,s.h)({queries:e.map((function(e){return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({queryKey:o.B.poolReservesDataHumanized(e),queryFn:function(){return t.getReservesHumanized(e)},refetchInterval:o.g,meta:{}},r)}))})},u=function(e){return c([e])[0]}},15591:function(e,r,t){t.d(r,{B:function(){return s},g:function(){return o}});var n=t(90116),s={governance:["governance"],staking:["staking"],pool:["pool"],incentives:["incentives"],gho:["gho"],market:function(e){return[e.chainId,!!e.isFork,e.market]},user:function(e){return[e]},powers:function(e,r){return[].concat((0,n.Z)(s.governance),(0,n.Z)(s.user(e)),(0,n.Z)(s.market(r)),["powers"])},voteOnProposal:function(e,r,t){return[].concat((0,n.Z)(s.governance),(0,n.Z)(s.user(e)),(0,n.Z)(s.market(t)),[r,"voteOnProposal"])},votingPowerAt:function(e,r,t,o){return[].concat((0,n.Z)(s.governance),(0,n.Z)(s.user(e)),(0,n.Z)(s.market(o)),[r,t,"votingPowerAt"])},governanceTokens:function(e,r){return[].concat((0,n.Z)(s.governance),(0,n.Z)(s.user(e)),(0,n.Z)(s.market(r)),["governanceTokens"])},transactionHistory:function(e,r){return[].concat((0,n.Z)(s.user(e)),(0,n.Z)(s.market(r)),["transactionHistory"])},poolTokens:function(e,r){return[].concat((0,n.Z)(s.pool),(0,n.Z)(s.user(e)),(0,n.Z)(s.market(r)),["poolTokens"])},poolReservesDataHumanized:function(e){return[].concat((0,n.Z)(s.pool),(0,n.Z)(s.market(e)),["poolReservesDataHumanized"])},generalStakeUiData:function(e){return[].concat((0,n.Z)(s.staking),(0,n.Z)(s.market(e)),["generalStakeUiData"])},userStakeUiData:function(e,r){return[].concat((0,n.Z)(s.staking),(0,n.Z)(s.user(e)),(0,n.Z)(s.market(r)),["userStakeUiData"])},paraswapRates:function(e,r,t,o,i){return[].concat((0,n.Z)(s.user(i)),[e,r,t,o,"paraswapRates"])},gasPrices:function(e){return[e,"gasPrices"]},poolApprovedAmount:function(e,r,t){return[].concat((0,n.Z)(s.pool),(0,n.Z)(s.user(e)),(0,n.Z)(s.market(t)),[r,"poolApprovedAmount"])},approvedAmount:function(e,r,t,o){return[].concat((0,n.Z)(s.user(e)),(0,n.Z)(s.market(o)),[r,t,"approvedAmount"])}},o=6e4},64343:function(e,r,t){var n=t(67294);const s=n.forwardRef((function(e,r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},e),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"}))}));r.Z=s},56365:function(e,r,t){var n=t(67294);const s=n.forwardRef((function(e,r){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},e),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"}))}));r.Z=s},87669:function(e,r,t){t.d(r,{h:function(){return v}});var n=t(67294),s=t(464),o=t(32161),i=t(30081),a=t(52924),c=t(33989);class u extends c.l{constructor(e,r){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},r&&this.setQueries(r)}onSubscribe(){1===this.listeners.length&&this.observers.forEach((e=>{e.subscribe((r=>{this.onUpdate(e,r)}))}))}onUnsubscribe(){this.listeners.length||this.destroy()}destroy(){this.listeners=[],this.observers.forEach((e=>{e.destroy()}))}setQueries(e,r){this.queries=e,i.V.batch((()=>{const e=this.observers,t=this.findMatchingObservers(this.queries);t.forEach((e=>e.observer.setOptions(e.defaultedQueryOptions,r)));const n=t.map((e=>e.observer)),s=Object.fromEntries(n.map((e=>[e.options.queryHash,e]))),i=n.map((e=>e.getCurrentResult())),a=n.some(((r,t)=>r!==e[t]));(e.length!==n.length||a)&&(this.observers=n,this.observersMap=s,this.result=i,this.hasListeners()&&((0,o.e5)(e,n).forEach((e=>{e.destroy()})),(0,o.e5)(n,e).forEach((e=>{e.subscribe((r=>{this.onUpdate(e,r)}))})),this.notify()))}))}getCurrentResult(){return this.result}getQueries(){return this.observers.map((e=>e.getCurrentQuery()))}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map((e=>e.observer.getOptimisticResult(e.defaultedQueryOptions)))}findMatchingObservers(e){const r=this.observers,t=e.map((e=>this.client.defaultQueryOptions(e))),n=t.flatMap((e=>{const t=r.find((r=>r.options.queryHash===e.queryHash));return null!=t?[{defaultedQueryOptions:e,observer:t}]:[]})),s=n.map((e=>e.defaultedQueryOptions.queryHash)),o=t.filter((e=>!s.includes(e.queryHash))),i=r.filter((e=>!n.some((r=>r.observer===e)))),c=e=>{const r=this.client.defaultQueryOptions(e),t=this.observersMap[r.queryHash];return null!=t?t:new a.z(this.client,r)},u=o.map(((e,r)=>{if(e.keepPreviousData){const t=i[r];if(void 0!==t)return{defaultedQueryOptions:e,observer:t}}return{defaultedQueryOptions:e,observer:c(e)}}));return n.concat(u).sort(((e,r)=>t.indexOf(e.defaultedQueryOptions)-t.indexOf(r.defaultedQueryOptions)))}onUpdate(e,r){const t=this.observers.indexOf(e);-1!==t&&(this.result=(0,o.Rc)(this.result,t,r),this.notify())}notify(){i.V.batch((()=>{this.listeners.forEach((e=>{e(this.result)}))}))}}var l=t(85945),p=t(37122),d=t(91784),f=t(13588),m=t(38381);function v({queries:e,context:r}){const t=(0,l.NL)({context:r}),o=(0,p.S)(),a=n.useMemo((()=>e.map((e=>{const r=t.defaultQueryOptions(e);return r._optimisticResults=o?"isRestoring":"optimistic",r}))),[e,t,o]),[c]=n.useState((()=>new u(t,a))),v=c.getOptimisticResult(a);(0,s.$)(n.useCallback((e=>o?()=>{}:c.subscribe(i.V.batchCalls(e))),[c,o]),(()=>c.getCurrentResult()),(()=>c.getCurrentResult())),n.useEffect((()=>{c.setQueries(a,{listeners:!1})}),[a,c]);const h=(0,d._)();a.forEach((e=>{(0,f.pf)(e,h),(0,m.Fb)(e)})),(0,f.JN)(h);const b=v.some(((e,r)=>(0,m.SB)(a[r],e,o)))?v.flatMap(((e,r)=>{const t=a[r],n=c.getObservers()[r];if(t&&n){if((0,m.SB)(t,e,o))return(0,m.j8)(t,n,h);(0,m.Z$)(e,o)&&(0,m.j8)(t,n,h)}return[]})):[];if(b.length>0)throw Promise.all(b);const y=v.find(((e,r)=>{var t,n;return(0,f.KJ)({result:e,errorResetBoundary:h,useErrorBoundary:null!=(t=null==(n=a[r])?void 0:n.useErrorBoundary)&&t,query:c.getQueries()[r]})}));if(null!=y&&y.error)throw y.error;return v}}}]);