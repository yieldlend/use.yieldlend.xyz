"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5196],{55200:function(e,t,r){r.d(t,{R:function(){return f}});var n=r(49501),a=r(56365),i=r(58057),o=r(81645),s=r(61953),c=r(29630),l=r(68346),u=r(75084),d=r(8195),p=r(46930),x=r(85893),h=function(){return(0,x.jsx)(o.Z,{sx:{ml:"2px",fontSize:"11px"},children:(0,x.jsx)(a.Z,{})})},f=function(e){var t=e.txHash,r=e.children,a=(0,d.vR)(),f=a.close,v=a.mainTxState,b=(0,p.f)().currentNetworkConfig;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,x.jsx)(s.Z,{sx:{width:"48px",height:"48px",bgcolor:"success.200",borderRadius:"50%",mt:14,mx:"auto",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,x.jsx)(o.Z,{sx:{color:"success.main",fontSize:"32px"},children:(0,x.jsx)(i.Z,{})})}),(0,x.jsx)(c.Z,{sx:{mt:4},variant:"h2",children:(0,x.jsx)(n.cC,{id:"All done!"})}),r]}),(0,x.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,x.jsxs)(l.Z,{variant:"helperText",href:b.explorerLinkBuilder({tx:t||v.txHash}),sx:{display:"inline-flex",alignItems:"center",justifyContent:"right",mt:6,mb:3},underline:"hover",target:"_blank",rel:"noreferrer noopener",children:[(0,x.jsx)(n.cC,{id:"Review tx details"}),(0,x.jsx)(h,{})]}),(0,x.jsx)(u.Z,{onClick:f,variant:"contained",size:"large",sx:{minHeight:"44px"},"data-cy":"closeButton",children:(0,x.jsx)(n.cC,{id:"Ok, Close"})})]})]})}},67916:function(e,t,r){r.d(t,{Q:function(){return c}});var n=r(49501),a=r(29630),i=r(75084),o=r(69331),s=r(85893),c=function(e){var t=e.txError;return(0,s.jsx)(o.v,{severity:"error",sx:{mt:4,mb:0},children:(0,s.jsx)(a.Z,{variant:"description",children:t.error?(0,s.jsxs)(s.Fragment,{children:[t.error," ",(0,s.jsx)(i.Z,{sx:{verticalAlign:"top"},variant:"text",onClick:function(){return navigator.clipboard.writeText(t.rawError.message.toString())},children:(0,s.jsx)(a.Z,{variant:"description",children:(0,s.jsx)(n.cC,{id:"copy the error"})})})]}):(0,s.jsx)(n.cC,{id:"There was some error. Please try changing the parameters or <0><1>copy the error</1></0>",components:{0:(0,s.jsx)(i.Z,{sx:{verticalAlign:"top"},onClick:function(){return navigator.clipboard.writeText(t.rawError.message.toString())}}),1:(0,s.jsx)(a.Z,{variant:"description"})}})})})}},35643:function(e,t,r){r.d(t,{g:function(){return E}});var n=r(80854),a=r(1279),i=r(62753),o=r(9144),s=r(61953),c=r(90149),l=r(56371),u=r(67294),d=r(59499),p=r(36864),x=r(49501),h=r(57609),f=r(58527),v=r(85893);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(e){var t=(0,p.Z)({},e);return(0,v.jsx)(f.G,g(g({event:{eventName:h.vh.TOOL_TIP,eventParams:{tooltip:"Gas Calc"}}},t),{},{children:(0,v.jsx)(x.cC,{id:"This gas calculation is only an estimation. Your wallet will set the price of the transaction. You can modify the gas settings directly from your wallet provider."})}))},j=r(69331),y=r(80664),C=r(52369),O=r(83901);var P=r(8195),w=r(8656),T=r(25298),A=r(38776),k=r(87669),S=r(31001),I=function(e){var t=(0,w.Yh)((function(e){return e.jsonRpcProvider}));return(0,k.h)({queries:e.map((function(e){return{queryKey:S.B.gasPrices(e),queryFn:function(){return t(e).getFeeData().then((function(e){return function(e){var t,r,n,a,i={legacyGasPrice:(null===(t=e.gasPrice)||void 0===t?void 0:t.toString())||"0",maxFeePerGas:(null===(r=e.maxFeePerGas)||void 0===r?void 0:r.toString())||"0",maxPriorityFeePerGas:(null===(n=e.maxPriorityFeePerGas)||void 0===n?void 0:n.toString())||"0"};return a={},(0,d.Z)(a,O.TP.Slow,i),(0,d.Z)(a,O.TP.Normal,i),(0,d.Z)(a,O.TP.Fast,i),a}(e)}))},refetchInterval:3e4}}))})},Z=r(41024),E=function(e){var t,r=e.gasLimit,d=e.skipLoad,p=e.disabled,x=e.rightComponent,h=e.chainId,f=function(){var e=u.useContext(O.N4);if(void 0===e)throw new Error("useGasStation must be used within a GasStationProvider");return e}().state,b=(0,w.Yh)((function(e){return e.currentChainId})),g=null!==h&&void 0!==h?h:b,k=Object.values(T.ei).find((function(e){return e.chainId===g}));(0,A.Z)(k,"No market for this network");var S=(0,C.J)(k).data,E=function(e){return I([e])[0]}(g),D=E.data,N=null===(t=(0,y.P)(k).walletBalances[n.hP.toLowerCase()])||void 0===t?void 0:t.amountUSD,M=(0,T.Mo)(g),R=M.name,G=M.baseAssetSymbol,_=(0,P.vR)().loadingTxns,H=D&&null!==S&&void 0!==S&&S.baseCurrencyData?function(e,t,r,n,a){var i=t===O.TP.Custom?(0,l.parseUnits)(r,"gwei").toString():n[t].legacyGasPrice;return Number((0,l.formatUnits)(e.mul(i),18))*parseFloat(a)}(r,f.gasOption,f.customGas,D,(0,a.Fv)(null===S||void 0===S?void 0:S.baseCurrencyData.networkBaseTokenPriceInUsd,null===S||void 0===S?void 0:S.baseCurrencyData.networkBaseTokenPriceDecimals)):void 0;return(0,v.jsxs)(o.Z,{gap:6,sx:{width:"100%"},children:[(0,v.jsxs)(s.Z,{sx:{display:"flex",mt:6,justifyContent:"space-between"},children:[(0,v.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,v.jsx)(i.Z,{color:"primary",sx:{fontSize:"16px",mr:1.5}}),_&&!d?(0,v.jsx)(c.Z,{color:"inherit",size:"16px",sx:{mr:2}}):H&&!p?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Z.B,{value:H,symbol:"USD",color:"text.secondary"}),(0,v.jsx)(m,{})]}):"-"]}),x]}),!p&&Number(N)<Number(H)&&(0,v.jsx)(s.Z,{sx:{display:"flex",alignItems:"center"},children:(0,v.jsxs)(j.v,{severity:"warning",sx:{mb:0,mx:"auto"},children:["You do not have enough ",G," in your account to pay for transaction fees on"," ",R," network. Please deposit ",G," from another account."]})})]})}},67489:function(e,t,r){r.d(t,{B:function(){return U}});var n=r(59499),a=r(4730),i=r(49501),o=r(58057),s=r(81645),c=r(61953),l=r(75084),u=r(90149),d=r(29630),p=r(8195),x=r(77537),h=r(39771),f=r(36864),v=r(68861),b=r(58527),g=r(85893);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){var t=(0,f.Z)({},e);return(0,g.jsx)(b.G,j(j({},t),{},{children:(0,g.jsx)(i.cC,{id:"To continue, you need to grant YieldLend smart contracts permission to move your funds from your wallet. Depending on the asset and wallet you use, it is done by signing the permission message (gas free), or by submitting an approval transaction (requires gas). <0>Learn more</0>",components:{0:(0,g.jsx)(v.rU,{href:"https://eips.ethereum.org/EIPS/eip-2612",underline:"always"})}})}))},C=r(56365),O=r(68346),P=r(17674),w=r(64343),T=r(22659),A=r(73812),k=r(31538),S=r(61702),I=r(29894),Z=r(67294),E=r(32113),D=function(e){var t=e.currentMethod,r=e.setMethod,n=Z.useState(null),a=(0,P.Z)(n,2),o=a[0],l=a[1],u=Boolean(o),p=function(){l(null)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(c.Z,{onClick:function(e){l(e.currentTarget)},sx:{display:"flex",alignItems:"center",cursor:"pointer"},"data-cy":"approveButtonChange",children:[(0,g.jsx)(d.Z,{variant:"subheader2",color:"info.main",children:(0,g.jsx)(i.cC,{id:"{currentMethod}",values:{currentMethod:t}})}),(0,g.jsx)(s.Z,{sx:{fontSize:16,ml:1,color:"info.main"},children:(0,g.jsx)(T.Z,{})})]}),(0,g.jsxs)(A.Z,{anchorEl:o,open:u,onClose:p,MenuListProps:{"aria-labelledby":"basic-button"},keepMounted:!0,"data-cy":"approveMenu_".concat(t),children:[(0,g.jsxs)(k.Z,{"data-cy":"approveOption_".concat(E.n.PERMIT),selected:t===E.n.PERMIT,value:E.n.PERMIT,onClick:function(){t===E.n.APPROVE&&r(E.n.PERMIT),p()},children:[(0,g.jsx)(S.Z,{primaryTypographyProps:{variant:"subheader1"},children:(0,g.jsx)(i.cC,{id:"{0}",values:{0:E.n.PERMIT}})}),(0,g.jsx)(I.Z,{children:(0,g.jsx)(s.Z,{children:t===E.n.PERMIT&&(0,g.jsx)(w.Z,{})})})]}),(0,g.jsxs)(k.Z,{"data-cy":"approveOption_".concat(E.n.APPROVE),selected:t===E.n.APPROVE,value:E.n.APPROVE,onClick:function(){t===E.n.PERMIT&&r(E.n.APPROVE),p()},children:[(0,g.jsx)(S.Z,{primaryTypographyProps:{variant:"subheader1"},children:(0,g.jsx)(i.cC,{id:"{0}",values:{0:E.n.APPROVE}})}),(0,g.jsx)(I.Z,{children:(0,g.jsx)(s.Z,{children:t===E.n.APPROVE&&(0,g.jsx)(w.Z,{})})})]})]})]})},N=r(89291),M=r(46930),R=r(8656),G=function(){return(0,g.jsx)(s.Z,{sx:{ml:"2px",fontSize:"11px"},children:(0,g.jsx)(C.Z,{})})},_=function(e){var t=e.approvalHash,r=e.tryPermit,n=(0,R.Yh)(),a=n.walletApprovalMethodPreference,o=n.setWalletApprovalMethodPreference,s=r&&a,l=(0,M.f)().currentNetworkConfig,u=t===N.Z;return t||u||!r?t&&!s?(0,g.jsx)(c.Z,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",pb:1},children:t&&(0,g.jsxs)(O.Z,{variant:"helperText",href:l.explorerLinkBuilder({tx:t}),sx:{display:"inline-flex",alignItems:"center"},underline:"hover",target:"_blank",rel:"noreferrer noopener",children:[(0,g.jsx)(i.cC,{id:"Review approval tx details"}),(0,g.jsx)(G,{})]})}):(0,g.jsx)(g.Fragment,{}):(0,g.jsxs)(c.Z,{sx:{display:"inline-flex",alignItems:"center",mb:2},children:[(0,g.jsxs)(d.Z,{variant:"subheader2",color:"text.secondary",children:[(0,g.jsx)(i.cC,{id:"Approve with"}),"\xa0"]}),(0,g.jsx)(D,{currentMethod:a,setMethod:function(e){return o(e)}})]})},H=["actionInProgressText","actionText","amount","approvalTxState","handleApproval","handleAction","isWrongNetwork","mainTxState","preparingTransactions","requiresAmount","requiresApproval","sx","symbol","blocked","fetchingData","errorParams","tryPermit","event"];function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=function(e){var t=e.actionInProgressText,r=e.actionText,n=e.amount,f=e.approvalTxState,v=e.handleApproval,b=e.handleAction,m=e.isWrongNetwork,j=e.mainTxState,C=e.preparingTransactions,O=e.requiresAmount,P=e.requiresApproval,w=e.sx,T=e.symbol,A=e.blocked,k=e.fetchingData,S=void 0!==k&&k,I=e.errorParams,Z=e.tryPermit,E=(e.event,(0,a.Z)(e,H)),D=(0,p.vR)().txError,N=(0,x.Z)().readOnlyModeAddress,M=P&&(null===D||void 0===D?void 0:D.txAction)===h.aD.APPROVAL&&(null===D||void 0===D?void 0:D.actionBlocked),R=O&&O&&0===Number(n);var G=A?{disabled:!0,content:r}:(null===D||void 0===D?void 0:D.txAction)!==h.aD.GAS_ESTIMATION&&(null===D||void 0===D?void 0:D.txAction)!==h.aD.MAIN_ACTION||null===D||void 0===D||!D.actionBlocked?m?{disabled:!0,content:(0,g.jsx)(i.cC,{id:"Wrong Network"})}:S?{disabled:!0,content:(0,g.jsx)(i.cC,{id:"Fetching data..."})}:R?{disabled:!0,content:(0,g.jsx)(i.cC,{id:"Enter an amount"})}:C?{disabled:!0,loading:!0}:null!==j&&void 0!==j&&j.loading?{loading:!0,disabled:!0,content:t}:!P||null!==f&&void 0!==f&&f.success?{content:r,handleClick:b}:{disabled:!0,content:r}:I||{loading:!1,disabled:!0,content:r},B=G.content,U=G.disabled,V=G.loading,F=G.handleClick,q=!P||m||R||C||M?null:null!==f&&void 0!==f&&f.loading?{loading:!0,disabled:!0,content:(0,g.jsx)(i.cC,{id:"Approving {symbol}...",values:{symbol:T}})}:null!==f&&void 0!==f&&f.success?{disabled:!0,content:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.cC,{id:"Approve Confirmed"}),(0,g.jsx)(s.Z,{sx:{fontSize:20,ml:2},children:(0,g.jsx)(o.Z,{})})]})}:{content:(0,g.jsx)(y,{variant:"buttonL",iconSize:20,iconMargin:2,color:"white",text:(0,g.jsx)(i.cC,{id:"Approve {symbol} to continue",values:{symbol:T}})}),handleClick:v};return(0,g.jsxs)(c.Z,L(L({sx:L({display:"flex",flexDirection:"column",mt:12},w)},E),{},{children:[q&&!N&&(0,g.jsx)(c.Z,{sx:{display:"flex",justifyContent:"end",alignItems:"center"},children:(0,g.jsx)(_,{approvalHash:null===f||void 0===f?void 0:f.txHash,tryPermit:Z})}),q&&!N&&(0,g.jsxs)(l.Z,{variant:"contained",disabled:q.disabled||A,onClick:function(){return q.handleClick&&q.handleClick()},size:"large",sx:{minHeight:"44px"},"data-cy":"approvalButton",children:[q.loading&&(0,g.jsx)(u.Z,{color:"inherit",size:"16px",sx:{mr:2}}),q.content]}),(0,g.jsxs)(l.Z,{variant:"contained",disabled:U||A||void 0!==N,onClick:F,size:"large",sx:L({minHeight:"44px"},q?{mt:2}:{}),"data-cy":"actionButton",children:[V&&(0,g.jsx)(u.Z,{color:"inherit",size:"16px",sx:{mr:2}}),B]}),N&&(0,g.jsx)(d.Z,{variant:"helperText",color:"warning.main",sx:{textAlign:"center",mt:2},children:(0,g.jsx)(i.cC,{id:"Read-only mode. Connect to a wallet to perform transactions."})})]}))}},10343:function(e,t,r){r.d(t,{I:function(){return h}});var n=r(59499),a=r(49501),i=r(29630),o=r(75084),s=r(77537),c=r(8656),l=r(57609),u=r(69331),d=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){var t=e.networkName,r=e.chainId,n=e.event,p=e.funnel,h=(0,s.Z)(),f=h.switchNetwork,v=h.switchNetworkError,b=(0,c.Yh)((function(e){return e.trackEvent}));return(0,d.jsx)(u.v,{severity:"error",icon:!1,children:v?(0,d.jsx)(i.Z,{children:(0,d.jsx)(a.cC,{id:"Seems like we can't switch the network automatically. Please check if you can change it from the wallet."})}):(0,d.jsxs)(i.Z,{variant:"description",children:[(0,d.jsx)(a.cC,{id:"Please switch to {networkName}.",values:{networkName:t}})," ",(0,d.jsx)(o.Z,{variant:"text",sx:{ml:"2px",verticalAlign:"top"},onClick:function(){b(l.vh.SWITCH_NETWORK,x(x({funnel:p},null===n||void 0===n?void 0:n.eventParams),{},{network:t})),f(r)},disableRipple:!0,children:(0,d.jsx)(i.Z,{variant:"description",children:(0,d.jsx)(a.cC,{id:"Switch Network"})})})]})})}},89291:function(e,t,r){r.d(t,{Z:function(){return P},Q:function(){return w}});var n=r(90116),a=r(59499),i=r(50029),o=r(17674),s=r(87794),c=r.n(s),l=r(75331),u=r(80854),d=r(70267),p=r(67294),x=r(19419),h=r(8195),f=r(77537),v=r(8656),b=r(32113),g=r(39771),m=r(31001);function j(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P="Signed correctly",w=function(e){var t=e.handleGetTxns,r=e.handleGetPermitTxns,a=e.tryPermit,s=void 0!==a&&a,y=e.permitAction,C=e.skip,w=e.protocolAction,T=e.deps,A=void 0===T?[]:T,k=e.eventTxInfo,S=(0,h.vR)(),I=S.approvalTxState,Z=S.setApprovalTxState,E=S.mainTxState,D=S.setMainTxState,N=S.setGasLimit,M=S.loadingTxns,R=S.setLoadingTxns,G=S.setTxError,_=(0,f.Z)(),H=_.signTxData,B=_.sendTx,L=_.getTxError,U=(0,x.n)(),V=U.refetchPoolData,F=U.refetchIncentiveData,q=U.refetchGhoData,z=(0,p.useState)([]),W=z[0],Y=z[1],Q=(0,p.useState)(),K=Q[0],J=Q[1],$=(0,v.Yh)((function(e){return[e.signERC20Approval,e.walletApprovalMethodPreference,e.generateCreditDelegationSignatureRequest,e.generatePermitPayloadForMigrationSupplyAsset,e.addTransaction,e.signStakingApproval,e.currentMarketData]})),X=(0,o.Z)($,7),ee=X[0],te=X[1],re=X[2],ne=X[3],ae=X[4],ie=X[5],oe=X[6],se=(0,p.useState)(),ce=se[0],le=se[1],ue=(0,p.useState)(),de=ue[0],pe=ue[1],xe=(0,p.useState)(!1),he=xe[0],fe=xe[1],ve=(0,p.useRef)(!1);(0,p.useEffect)((function(){return ve.current=!0,function(){ve.current=!1}}),[]);var be=function(){var e=(0,i.Z)(c().mark((function e(t){var r,n,a,i,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.tx,n=t.errorCallback,a=t.successCallback,i=t.approval,e.prev=1,e.next=4,r();case 4:return o=e.sent,e.prev=5,e.next=8,o.wait(1);case 8:ve.current&&a&&a(o),ae(o.hash,O({txState:"success",action:i?l.UQ.approval:null!==w&&void 0!==w?w:l.UQ.default},k)),d.queryClient.invalidateQueries({queryKey:m.B.pool}),d.queryClient.invalidateQueries({queryKey:m.B.staking}),V&&V(),q&&q(),F&&F(),e.next=34;break;case 17:return e.prev=17,e.t0=e.catch(5),e.prev=19,e.next=22,L(o.hash);case 22:return s=e.sent,ve.current&&n&&n(new Error(s),o.hash),e.abrupt("return");case 27:return e.prev=27,e.t1=e.catch(19),ve.current&&n&&n(e.t1,o.hash),e.abrupt("return");case 31:return e.prev=31,ae(o.hash,O({txState:"failed",action:w||l.UQ.default},k)),e.finish(31);case 34:return e.abrupt("return");case 37:e.prev=37,e.t2=e.catch(1),n&&n(e.t2);case 40:case"end":return e.stop()}}),e,null,[[1,37],[5,17],[19,27,31,34]])})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,i.Z)(c().mark((function e(t){var r,n,a,o,s,l,u,d,p,x,h,f,v,b,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ce){e.next=77;break}if(!(he&&t&&(null===t||void 0===t?void 0:t.length)>0)){e.next=59;break}Z(O(O({},I),{},{loading:!0})),e.prev=3,r=Math.floor(Date.now()/1e3+3600).toString(),n=[],a=j(t);try{for(a.s();!(o=a.n()).done;)(s=o.value).permitType&&"POOL"!=s.permitType?"SUPPLY_MIGRATOR_V3"===s.permitType?n.push(ne(O(O({},s),{},{deadline:r}))):"BORROW_MIGRATOR_V3"===s.permitType?n.push(re(O(O({},s),{},{deadline:r,spender:oe.addresses.V3_MIGRATOR||""}))):"STAKE"===s.permitType&&n.push(ie({token:s.underlyingAsset,amount:s.amount,deadline:r})):n.push(ee({reserve:s.underlyingAsset,amount:s.amount,deadline:r}))}catch(y){a.e(y)}finally{a.f()}return e.prev=8,l=[],e.next=12,Promise.all(n);case 12:u=e.sent,d=j(u),e.prev=14,d.s();case 16:if((p=d.n()).done){e.next=25;break}return x=p.value,e.t0=l,e.next=21,H(x);case 21:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 23:e.next=16;break;case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(14),d.e(e.t2);case 30:return e.prev=30,d.f(),e.finish(30);case 33:if(ve.current){e.next=35;break}return e.abrupt("return");case 35:Y(l),J(r),Z({txHash:P,loading:!1,success:!0}),G(void 0),e.next=48;break;case 41:if(e.prev=41,e.t3=e.catch(8),ve.current){e.next=45;break}return e.abrupt("return");case 45:h=(0,g.WG)(e.t3,g.aD.APPROVAL,!1),G(h),Z({txHash:void 0,loading:!1});case 48:e.next=57;break;case 50:if(e.prev=50,e.t4=e.catch(3),ve.current){e.next=54;break}return e.abrupt("return");case 54:f=(0,g.WG)(e.t4,g.aD.GAS_ESTIMATION,!1),G(f),Z({txHash:void 0,loading:!1});case 57:e.next=77;break;case 59:return e.prev=59,Z(O(O({},I),{},{loading:!0})),e.next=63,Promise.all(ce.map((function(e){return e.tx()})));case 63:return v=e.sent,e.next=66,Promise.all(v.map((function(e){return new Promise(function(){var t=(0,i.Z)(c().mark((function t(r,n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete e.gasPrice,be({tx:function(){return B(e)},successCallback:function(e){r(e)},errorCallback:function(e,t){var r=(0,g.WG)(e,g.aD.APPROVAL,!1);G(r),Z({txHash:t,loading:!1}),n()},approval:!0});case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())})));case 66:b=e.sent,Z({txHash:b[0].hash,loading:!1,success:!0}),e.next=77;break;case 70:if(e.prev=70,e.t5=e.catch(59),ve.current){e.next=74;break}return e.abrupt("return");case 74:m=(0,g.WG)(e.t5,g.aD.GAS_ESTIMATION,!1),G(m),Z({txHash:void 0,loading:!1});case 77:case"end":return e.stop()}}),e,null,[[3,50],[8,41],[14,27,30,33],[59,70]])})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=(0,i.Z)(c().mark((function e(){var t,n,a,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!he||!r){e.next=21;break}if(W.length&&K){e.next=3;break}throw new Error("signature needed");case 3:return e.prev=3,D(O(O({},E),{},{loading:!0})),e.next=7,r(W,K);case 7:return t=e.sent,e.next=10,t[0].tx();case 10:return delete(n=e.sent).gasPrice,e.abrupt("return",be({tx:function(){return B(n)},successCallback:function(e){D({txHash:e.hash,loading:!1,success:!0}),G(void 0)},errorCallback:function(e,t){var r=(0,g.WG)(e,g.aD.MAIN_ACTION);G(r),D({txHash:t,loading:!1})}}));case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0,"error"),a=(0,g.WG)(e.t0,g.aD.GAS_ESTIMATION,!1),G(a),D({txHash:void 0,loading:!1});case 21:if(he&&ce||!de){e.next=37;break}return e.prev=22,D(O(O({},E),{},{loading:!0})),e.next=26,de.tx();case 26:return delete(i=e.sent).gasPrice,e.abrupt("return",be({tx:function(){return B(i)},successCallback:function(e){D({txHash:e.hash,loading:!1,success:!0}),G(void 0)},errorCallback:function(e,t){var r=(0,g.WG)(e,g.aD.MAIN_ACTION);G(r),D({txHash:t,loading:!1})}}));case 31:e.prev=31,e.t1=e.catch(22),o=(0,g.WG)(e.t1,g.aD.GAS_ESTIMATION,!1),console.log(e.t1,o),G(o),D({txHash:void 0,loading:!1});case 37:case"end":return e.stop()}}),e,null,[[3,15],[22,31]])})));return function(){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){if(!C){R(!0);var e=setTimeout((function(){return R(!0),t().then(function(){var e=(0,i.Z)(c().mark((function e(t){var n,a,i,o,l,d,p,x,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ve.current){e.next=2;break}return e.abrupt("return");case 2:if(n=t.filter((function(e){return"ERC20_APPROVAL"==e.txType})),n.length>0&&le(n),a=s&&te===b.n.PERMIT&&r&&y,!(n.length>0&&a)){e.next=14;break}fe(!0),i=u.eB[y],N(i.limit||""),D({txHash:void 0}),G(void 0),R(!1),e.next=50;break;case 14:fe(!1),n.length>0&&le(n),pe(t.find((function(e){return["DLP_ACTION","REWARD_ACTION","FAUCET_V2_MINT","FAUCET_MINT","STAKE_ACTION","GOV_DELEGATION_ACTION","GOVERNANCE_ACTION","V3_MIGRATION_ACTION"].includes(e.txType)}))),D({txHash:void 0}),G(void 0),o=0,e.prev=20,l=j(t),e.prev=22,l.s();case 24:if((d=l.n()).done){e.next=32;break}return p=d.value,e.next=28,p.gas();case 28:(x=e.sent)&&x.gasLimit&&(o+=Number(x.gasLimit));case 30:e.next=24;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(22),l.e(e.t0);case 37:return e.prev=37,l.f(),e.finish(37);case 40:e.next=48;break;case 42:if(e.prev=42,e.t1=e.catch(20),ve.current){e.next=46;break}return e.abrupt("return");case 46:h=(0,g.WG)(e.t1,g.aD.GAS_ESTIMATION,!1),G(h);case 48:N(o.toString()||""),R(!1);case 50:case"end":return e.stop()}}),e,null,[[20,42],[22,34,37,40]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){if(ve.current){D({txHash:void 0});var t=(0,g.WG)(e,g.aD.GAS_ESTIMATION,!1);G(t),R(!1)}}))}),1e3);return function(){return clearTimeout(e)}}le(void 0),pe(void 0)}),[C].concat((0,n.Z)(A),[s,te])),{approval:ge,action:me,loadingTxns:M,setUsePermit:fe,requiresApproval:!!ce||he,approvalTxState:I,mainTxState:E,usePermit:he}}},39771:function(e,t,r){r.d(t,{aD:function(){return n},WG:function(){return o}});var n,a=r(49501),i=r(85893);!function(e){e[e.APPROVAL=0]="APPROVAL",e[e.MAIN_ACTION=1]="MAIN_ACTION",e[e.GAS_ESTIMATION=2]="GAS_ESTIMATION"}(n||(n={}));var o=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=1;if("MetaMask Tx Signature: User denied transaction signature."===e.message||"MetaMask Message Signature: User denied message signature."===e.message)return{error:s[4001],blocking:!1,actionBlocked:!1,rawError:e,txAction:t};try{var a,i=JSON.parse(null===e||void 0===e||null===(a=e.error)||void 0===a?void 0:a.body),o=Number(i.error.message.split(": ")[1]);isNaN(o)||(n=o)}catch(l){}var c=s[n];return c?{error:c,blocking:r,actionBlocked:!0,rawError:e,txAction:t}:{error:void 0,blocking:r,actionBlocked:!0,rawError:e,txAction:t}},s={7:(0,i.jsx)(a.cC,{id:"Pool addresses provider is not registered"}),9:(0,i.jsx)(a.cC,{id:"Address is not a contract"}),11:(0,i.jsx)(a.cC,{id:"The caller of the function is not an AToken"}),12:(0,i.jsx)(a.cC,{id:"The address of the pool addresses provider is invalid"}),13:(0,i.jsx)(a.cC,{id:"Invalid return value of the flashloan executor function"}),19:(0,i.jsx)(a.cC,{id:"Invalid flashloan premium"}),22:(0,i.jsx)(a.cC,{id:"Invalid bridge protocol fee"}),23:(0,i.jsx)(a.cC,{id:"The caller of this function must be a pool"}),24:(0,i.jsx)(a.cC,{id:"Invalid amount to mint"}),25:(0,i.jsx)(a.cC,{id:"Invalid amount to burn"}),26:(0,i.jsx)(a.cC,{id:"Amount must be greater than 0"}),27:(0,i.jsx)(a.cC,{id:"Action requires an active reserve"}),28:(0,i.jsx)(a.cC,{id:"Action cannot be performed because the reserve is frozen"}),29:(0,i.jsx)(a.cC,{id:"Action cannot be performed because the reserve is paused"}),30:(0,i.jsx)(a.cC,{id:"Borrowing is not enabled"}),31:(0,i.jsx)(a.cC,{id:"Stable borrowing is not enabled"}),32:(0,i.jsx)(a.cC,{id:"User cannot withdraw more than the available balance"}),34:(0,i.jsx)(a.cC,{id:"The collateral balance is 0"}),35:(0,i.jsx)(a.cC,{id:"Health factor is lesser than the liquidation threshold"}),36:(0,i.jsx)(a.cC,{id:"There is not enough collateral to cover a new borrow"}),37:(0,i.jsx)(a.cC,{id:"Collateral is (mostly) the same currency that is being borrowed"}),38:(0,i.jsx)(a.cC,{id:"The requested amount is greater than the max loan size in stable rate mode"}),39:(0,i.jsx)(a.cC,{id:"For repayment of a specific type of debt, the user needs to have debt that type"}),40:(0,i.jsx)(a.cC,{id:"To repay on behalf of a user an explicit amount to repay is needed"}),41:(0,i.jsx)(a.cC,{id:"User does not have outstanding stable rate debt on this reserve"}),42:(0,i.jsx)(a.cC,{id:"User does not have outstanding variable rate debt on this reserve"}),43:(0,i.jsx)(a.cC,{id:"The underlying balance needs to be greater than 0"}),44:(0,i.jsx)(a.cC,{id:"Interest rate rebalance conditions were not met"}),45:(0,i.jsx)(a.cC,{id:"Health factor is not below the threshold"}),46:(0,i.jsx)(a.cC,{id:"The collateral chosen cannot be liquidated"}),47:(0,i.jsx)(a.cC,{id:"User did not borrow the specified currency"}),48:(0,i.jsx)(a.cC,{id:"Borrow and repay in same block is not allowed"}),49:(0,i.jsx)(a.cC,{id:"Inconsistent flashloan parameters"}),50:(0,i.jsx)(a.cC,{id:"Borrow cap is exceeded"}),51:(0,i.jsx)(a.cC,{id:"Supply cap is exceeded"}),52:(0,i.jsx)(a.cC,{id:"Unbacked mint cap is exceeded"}),53:(0,i.jsx)(a.cC,{id:"Debt ceiling is exceeded"}),54:(0,i.jsx)(a.cC,{id:"AToken supply is not zero"}),55:(0,i.jsx)(a.cC,{id:"Stable debt supply is not zero"}),56:(0,i.jsx)(a.cC,{id:"Variable debt supply is not zero"}),57:(0,i.jsx)(a.cC,{id:"Ltv validation failed"}),60:(0,i.jsx)(a.cC,{id:"Asset is not borrowable in isolation mode"}),62:(0,i.jsx)(a.cC,{id:"User is in isolation mode"}),76:(0,i.jsx)(a.cC,{id:"Array parameters that should be equal length are not"}),77:(0,i.jsx)(a.cC,{id:"Zero address not valid"}),78:(0,i.jsx)(a.cC,{id:"Invalid expiration"}),79:(0,i.jsx)(a.cC,{id:"Invalid signature"}),80:(0,i.jsx)(a.cC,{id:"Operation not supported"}),81:(0,i.jsx)(a.cC,{id:"Debt ceiling is not zero"}),82:(0,i.jsx)(a.cC,{id:"Asset is not listed"}),85:(0,i.jsx)(a.cC,{id:"The underlying asset cannot be rescued"}),88:(0,i.jsx)(a.cC,{id:"Stable borrowing is enabled"}),89:(0,i.jsx)(a.cC,{id:"User is trying to borrow multiple assets including a siloed one"}),4001:(0,i.jsx)(a.cC,{id:"You cancelled the transaction."})}}}]);