"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6936],{84734:function(e,t,r){r.d(t,{v:function(){return a}});var n=r(49501),s=r(68861),o=r(85893),a=function(){return(0,o.jsx)(n.cC,{id:"<0>Ampleforth</0> is a rebasing asset. Visit the <1>documentation</1> to learn more.",components:{0:(0,o.jsx)("b",{}),1:(0,o.jsx)(s.rU,{href:"https://docs.aave.com/developers/v/2.0/guides/ampl-asset-listing",underline:"always"})}})}},81902:function(e,t,r){var n;r.d(t,{R:function(){return n}}),function(e){e.supplyCap="supplyCap",e.borrowCap="borrowCap"}(n||(n={}))},29002:function(e,t,r){r.d(t,{o:function(){return u}});var n=r(59499),s=r(4730),o=r(81645),a=r(85893),i=["sx"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=function(e){var t=e.sx,r=(0,s.Z)(e,i);return(0,a.jsxs)(o.Z,c(c({sx:c({fill:"none",stroke:"#A5A8B6"},t),viewBox:"0 0 21 19",xmlns:"http://www.w3.org/2000/svg","aria-label":"Wallet"},r),{},{children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_3719_3323)",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"M17.3203 17.398H3.32031C2.78988 17.398 2.28117 17.1872 1.9061 16.8122C1.53103 16.4371 1.32031 15.9284 1.32031 15.3979V6.39795C1.32031 5.86752 1.53103 5.35881 1.9061 4.98374C2.28117 4.60866 2.78988 4.39795 3.32031 4.39795H17.3203C17.8507 4.39795 18.3595 4.60866 18.7345 4.98374C19.1096 5.35881 19.3203 5.86752 19.3203 6.39795V15.3979C19.3203 15.9284 19.1096 16.4371 18.7345 16.8122C18.3595 17.1872 17.8507 17.398 17.3203 17.398Z"}),(0,a.jsx)("path",{d:"M14.8203 11.3979C14.6877 11.3979 14.5605 11.3453 14.4668 11.2515C14.373 11.1577 14.3203 11.0306 14.3203 10.8979C14.3203 10.7653 14.373 10.6382 14.4668 10.5444C14.5605 10.4506 14.6877 10.3979 14.8203 10.3979C14.9529 10.3979 15.0801 10.4506 15.1739 10.5444C15.2676 10.6382 15.3203 10.7653 15.3203 10.8979C15.3203 11.0306 15.2676 11.1577 15.1739 11.2515C15.0801 11.3453 14.9529 11.3979 14.8203 11.3979Z",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M16.3203 4.39793V2.99993C16.3202 2.69343 16.2497 2.39106 16.1142 2.11615C15.9787 1.84124 15.7818 1.60116 15.5387 1.41444C15.2956 1.22773 15.0129 1.09937 14.7124 1.03929C14.4118 0.979209 14.1015 0.989009 13.8053 1.06793L2.80531 4.00093C2.37937 4.11444 2.00285 4.36549 1.7343 4.71506C1.46575 5.06462 1.32021 5.49312 1.32031 5.93393V6.39793"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_3719_3323",children:(0,a.jsx)("rect",{width:"20",height:"19",fill:"white",transform:"translate(0.320312)"})})})]}))}},25049:function(e,t,r){r.d(t,{Y:function(){return p}});var n=r(59499),s=r(4730),o=r(49501),a=r(81902),i=r(58527),l=r(85893),c=["capType"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.capType,r=(0,s.Z)(e,c),n=t===a.R.supplyCap?(0,l.jsx)(o.cC,{id:"This is the total amount that you are able to supply to in this reserve. You are able to supply your wallet balance up until the supply cap is reached."}):(0,l.jsx)(o.cC,{id:"This is the total amount available for you to borrow. You can borrow based on your collateral and until the borrow cap is reached."});return(0,l.jsx)(i.G,d(d({},r),{},{children:n}))}},53601:function(e,t,r){r.d(t,{l:function(){return A},W:function(){return T}});var n=r(59499),s=r(4730),o=r(49501),a=r(33740),i=r(62097),l=r(61953),c=r(29630),u=r(90149),d=r(81011),p=r(80562),m=r(55343),x=r(92012),y=r(31538),f=r(61702),b=r(75084),h=r(67294),v=r(57333),j=r(8656),g=r(25049),C=r(41024),O=r(72667),w=r(85893),S=["onChange"];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=h.forwardRef((function(e,t){var r=e.onChange,n=(0,s.Z)(e,S);return(0,w.jsx)(v.Z,P(P({},n),{},{getInputRef:t,onValueChange:function(t){t.value!==e.value&&r({target:{name:e.name,value:t.value||""}})},thousandSeparator:!0,isNumericString:!0,allowNegative:!1}))})),T=function(e){var t=e.value,r=e.usdValue,n=e.symbol,s=e.onChange,h=e.disabled,v=e.disableInput,S=e.onSelect,k=e.assets,T=e.capType,Z=e.maxValue,E=e.isMaxSelected,D=e.inputTitle,I=e.balanceText,R=e.loading,B=void 0!==R&&R,N=e.event,M=e.selectOptionHeader,L=e.selectOption,W=e.sx,_=void 0===W?{}:W,F=(0,i.Z)(),H=(0,j.Yh)((function(e){return e.trackEvent})),Y=1===k.length?k[0]:k&&k.find((function(e){return e.symbol===n}));return(0,w.jsxs)(l.Z,P(P({},_),{},{children:[(0,w.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,w.jsx)(c.Z,{color:"text.secondary",children:D||(0,w.jsx)(o.cC,{id:"Amount"})}),T&&(0,w.jsx)(g.Y,{capType:T})]}),(0,w.jsxs)(l.Z,{sx:function(e){return{p:"8px 12px",border:"1px solid ".concat(e.palette.divider),borderRadius:"6px",mb:1}},children:[(0,w.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",mb:.5},children:[B?(0,w.jsx)(l.Z,{sx:{flex:1},children:(0,w.jsx)(u.Z,{color:"inherit",size:"16px"})}):(0,w.jsx)(d.ZP,{sx:{flex:1},placeholder:"0.00",disabled:h||v,value:t,autoFocus:!0,onChange:function(e){s&&(Number(e.target.value)>Number(Z)?s("-1"):s(e.target.value))},inputProps:{"aria-label":"amount input",style:{fontSize:"21px",lineHeight:"28,01px",padding:0,height:"28px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},inputComponent:A}),""!==t&&!v&&(0,w.jsx)(p.Z,{sx:{minWidth:0,p:0,left:8,zIndex:1,color:"text.muted","&:hover":{color:"text.secondary"}},onClick:function(){s&&s("")},disabled:h,children:(0,w.jsx)(a.Z,{height:16})}),S&&1!==k.length?(0,w.jsx)(m.Z,{children:(0,w.jsxs)(x.Z,{disabled:h,value:Y.symbol,onChange:function(e){var t=k.find((function(t){return t.symbol===e.target.value}));S&&S(t),s&&s("")},variant:"outlined",className:"AssetInput__select","data-cy":"assetSelect",MenuProps:{sx:{maxHeight:"240px",".MuiPaper-root":{border:"dark"===F.palette.mode?"1px solid #EBEBED1F":"unset",boxShadow:"0px 2px 10px 0px #0000001A"}}},sx:{p:0,"&.AssetInput__select .MuiOutlinedInput-input":{p:0,backgroundColor:"transparent",pr:"24px !important"},"&.AssetInput__select .MuiOutlinedInput-notchedOutline":{display:"none"},"&.AssetInput__select .MuiSelect-icon":{color:"text.primary",right:"0%"}},renderValue:function(e){var t=1===k.length?k[0]:k&&k.find((function(t){return t.symbol===e}));return(0,w.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},"data-cy":"assetsSelectedOption_".concat(t.symbol.toUpperCase()),children:[(0,w.jsx)(O.T1,{symbol:t.iconSymbol||t.symbol,aToken:t.aToken,sx:{mr:2,ml:4}}),(0,w.jsx)(c.Z,{variant:"main16",color:"text.primary",children:e})]})},children:[M||void 0,k.map((function(e){return(0,w.jsx)(y.Z,{value:e.symbol,"data-cy":"assetsSelectOption_".concat(e.symbol.toUpperCase()),children:L?L(e):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(O.T1,{aToken:e.aToken,symbol:e.iconSymbol||e.symbol,sx:{fontSize:"22px",mr:1}}),(0,w.jsx)(f.Z,{sx:{mr:6},children:e.symbol}),e.balance&&(0,w.jsx)(C.B,{value:e.balance,compact:!0})]})},e.symbol)}))]})}):(0,w.jsxs)(l.Z,{sx:{display:"inline-flex",alignItems:"center"},children:[(0,w.jsx)(O.T1,{aToken:Y.aToken,symbol:Y.iconSymbol||Y.symbol,sx:{mr:2,ml:4}}),(0,w.jsx)(c.Z,{variant:"h3",sx:{lineHeight:"28px"},"data-cy":"inputAsset",children:n})]})]}),(0,w.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",height:"16px"},children:[B?(0,w.jsx)(l.Z,{sx:{flex:1}}):(0,w.jsx)(C.B,{value:isNaN(Number(r))?0:Number(r),compact:!0,symbol:"USD",variant:"secondary12",color:"text.muted",symbolsColor:"text.muted",flexGrow:1}),Y.balance&&s&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(c.Z,{component:"div",variant:"secondary12",color:"text.secondary",children:[I&&""!==I?I:(0,w.jsx)(o.cC,{id:"Balance"})," ",(0,w.jsx)(C.B,{value:Y.balance,compact:!0,variant:"secondary12",color:"text.secondary",symbolsColor:"text.disabled"})]}),!v&&(0,w.jsx)(b.Z,{size:"small",sx:{minWidth:0,ml:"7px",p:0},onClick:function(){N&&H(N.eventName,P({},N.eventParams)),s("-1")},disabled:h||E,children:(0,w.jsx)(o.cC,{id:"Max"})})]})]})]})]}))}},63491:function(e,t,r){r.d(t,{D:function(){return m}});var n=r(49501),s=r(5506),o=r(52758),a=r(61953),i=r(81645),l=r(29630),c=r(68346),u=r(75084),d=r(8195),p=r(85893),m=function(e){var t=e.txError,r=(0,d.vR)().close;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",mb:"92px"},children:[(0,p.jsx)(a.Z,{sx:{width:"48px",height:"48px",backgroundColor:"error.200",borderRadius:"50%",mt:14,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,p.jsx)(i.Z,{sx:{color:"error.main",fontSize:"32px"},children:(0,p.jsx)(s.Z,{})})}),(0,p.jsx)(l.Z,{sx:{mt:2},variant:"h2",children:(0,p.jsx)(n.cC,{id:"Transaction failed"})}),(0,p.jsx)(l.Z,{children:(0,p.jsx)(n.cC,{id:"You can report incident to our <0>Discord</0> or<1>Github</1>.",components:{0:(0,p.jsx)(c.Z,{href:"https://discord.com/invite/aave"}),1:(0,p.jsx)(c.Z,{href:"https://github.com/aave/interface"})}})}),(0,p.jsxs)(u.Z,{variant:"outlined",onClick:function(){return navigator.clipboard.writeText(t.rawError.message.toString())},size:"small",sx:{mt:6},children:[(0,p.jsx)(n.cC,{id:"Copy error text"}),(0,p.jsx)(i.Z,{sx:{ml:.5,fontSize:"12px"},children:(0,p.jsx)(o.Z,{})})]})]}),(0,p.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",mt:12},children:(0,p.jsx)(u.Z,{onClick:r,variant:"contained",size:"large",sx:{minHeight:"44px"},children:(0,p.jsx)(n.cC,{id:"Close"})})})]})}},94635:function(e,t,r){r.d(t,{A:function(){return h}});var n=r(80854),s=(r(67294),r(34220)),o=r(80664),a=r(43629),i=r(66209),l=r(8195),c=r(22454),u=r(77537),d=r(8656),p=r(25298),m=r(57609),x=r(78944),y=r(10343),f=r(63491),b=r(85893),h=function(e){var t,r,h=e.hideTitleSymbol,v=e.underlyingAsset,j=e.children,g=e.requiredChainId,C=e.title,O=e.requiredPermission,w=e.keepWrappedSymbol,S=(0,u.Z)().readOnlyModeAddress,k=(0,d.Yh)((function(e){return e.currentMarketData})),P=(0,d.Yh)((function(e){return e.currentNetworkConfig})),A=(0,o.P)(k).walletBalances,T=(0,s.HT)(),Z=T.user,E=T.reserves,D=(0,l.vR)(),I=D.txError,R=D.mainTxState,B=(0,c.T)().permissions,N=(0,i.Q)(g),M=N.isWrongNetwork,L=N.requiredChainId;if(I&&I.blocking)return(0,b.jsx)(f.D,{txError:I});if(O&&p.cr.permissions(k)&&!B.includes(O)&&k.permissionComponent)return(0,b.jsx)(b.Fragment,{children:k.permissionComponent});var W=E.find((function(e){return v.toLowerCase()===n.hP.toLowerCase()?e.isWrappedBaseAsset:v===e.underlyingAsset})),_=null===Z||void 0===Z?void 0:Z.userReservesData.find((function(e){return v.toLowerCase()===n.hP.toLowerCase()?e.reserve.isWrappedBaseAsset:v===e.underlyingAsset})),F=W.isWrappedBaseAsset&&!w?P.baseAssetSymbol:W.symbol;return(0,b.jsxs)(a.hv,{asset:W,children:[!R.success&&(0,b.jsx)(x.E,{title:C,symbol:h?void 0:F}),M&&!S&&(0,b.jsx)(y.I,{networkName:(0,p.Mo)(L).name,chainId:L,event:{eventName:m.vh.SWITCH_NETWORK,eventParams:{asset:v}}}),j({isWrongNetwork:M,nativeBalance:(null===(t=A[n.hP.toLowerCase()])||void 0===t?void 0:t.amount)||"0",tokenBalance:(null===(r=A[W.underlyingAsset.toLowerCase()])||void 0===r?void 0:r.amount)||"0",poolReserve:W,symbol:F,underlyingAsset:v,userReserve:_})]})}},93608:function(e,t,r){r.d(t,{R:function(){return f}});var n=r(49501),s=r(75331),o=r(62097),a=r(61953),i=r(29630),l=r(75084),c=r(67294),u=r(29002),d=r(41024),p=r(72667),m=r(77537),x=r(55200),y=r(85893),f=function(e){var t=e.txHash,r=e.action,f=e.amount,b=e.symbol,h=e.collateral,v=e.rate,j=e.addToken,g=e.customAction,C=e.customText,O=(0,m.Z)().addERC20Token,w=(0,c.useState)(""),S=w[0],k=w[1],P=(0,o.Z)();return(0,y.jsx)(x.R,{txHash:t,children:(0,y.jsxs)(a.Z,{sx:{mt:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[r&&f&&b&&(0,y.jsx)(i.Z,{children:(0,y.jsx)(n.cC,{id:"You {action} <0/> {symbol}",values:{action:r,symbol:b},components:{0:(0,y.jsx)(d.B,{value:Number(f),compact:!0,variant:"secondary14"})}})}),g&&(0,y.jsxs)(i.Z,{children:[C,g]}),!r&&!f&&b&&(0,y.jsxs)(i.Z,{children:["Your ",b," ",h?"now":"is not"," used as collateral"]}),v&&(0,y.jsx)(i.Z,{children:(0,y.jsx)(n.cC,{id:"You switched to {0} rate",values:{0:v===s.tk.Variable?"variable":"stable"}})}),j&&b&&(0,y.jsxs)(a.Z,{sx:function(e){return{border:"dark"===e.palette.mode?"1px solid ".concat(e.palette.divider):"none",background:"dark"===e.palette.mode?"none":"#F7F7F9",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",mt:"24px"}},children:[(0,y.jsx)(p.T1,{symbol:j.symbol,aToken:!(!j||!j.aToken),sx:{fontSize:"32px",mt:"12px",mb:"8px"}}),(0,y.jsx)(i.Z,{variant:"description",color:"text.primary",sx:{mx:"24px"},children:(0,y.jsx)(n.cC,{id:"Add {0} to wallet to track your balance.",values:{0:j&&j.aToken?"aToken ":"token "}})}),(0,y.jsxs)(l.Z,{onClick:function(){O({address:j.address,decimals:j.decimals,symbol:j.aToken?"y".concat(j.symbol):j.symbol,image:/_/.test(j.symbol)?void 0:S})},variant:"dark"===P.palette.mode?"outlined":"contained",size:"medium",sx:{mt:"8px",mb:"12px"},children:[j.symbol&&!/_/.test(j.symbol)&&(0,y.jsx)(p.Js,{symbol:j.symbol,onImageGenerated:k,aToken:j.aToken}),(0,y.jsx)(u.o,{sx:{width:"20px",height:"20px"}}),(0,y.jsx)(i.Z,{variant:"buttonM",color:"white",ml:"4px",children:(0,y.jsx)(n.cC,{id:"Add to wallet"})})]})]})]})})}},86936:function(e,t,r){r.r(t),r.d(t,{SupplyModal:function(){return ue}});var n=r(59499),s=r(49501),o=r(23286),a=r(67294),i=r(8195),l=r(31959),c=r(94635),u=r(80854),d=r(82403),p=r(1279),m=r(20854),x=r(70794),y=r(69331),f=r(84734),b=r(43629),h=r(46930),v=r(8656),j=r(94847),g=r(25298),C=r(57609),O=r(87385),w=r(34220),S=r(81902),k=r(53601),P=r(67916),A=r(93608),T=r(57824),Z=r(94671),E=r(29630),D=r(68346),I=r(68861),R=r(85893),B=function(){return(0,R.jsx)(y.v,{severity:"info",children:(0,R.jsxs)(E.Z,{children:[(0,R.jsx)(s.cC,{id:"Supplying your"})," YIELD"," ",(0,R.jsx)(s.cC,{id:"tokens is not the same as staking them. If you wish to stake your"})," YIELD"," ",(0,R.jsx)(s.cC,{id:"tokens, please go to the"})," ",(0,R.jsx)(D.Z,{href:I.Z6.staking,children:(0,R.jsx)(s.cC,{id:"staking view"})})]})})},N=r(18384),M=function(){return(0,R.jsx)(y.v,{severity:"warning",children:(0,R.jsxs)(E.Z,{children:[(0,R.jsx)(s.cC,{id:"Before supplying"})," SNX"," ",(0,R.jsx)(s.cC,{id:"please check that the amount you want to supply is not currently being used for staking. If it is being used for staking, your transaction might fail."})]})})},L=r(50029),W=r(17674),_=r(4730),F=r(87794),H=r.n(F),Y=r(75331),q=r(56371),U=r(70267),z=r(19419),V=r(28744),G=r(93591),Q=r(77537),K=r(32113),X=r(39771),$=r(31001),J=r(67489),ee=["amountToSupply","poolAddress","isWrongNetwork","sx","symbol","blocked","decimals","isWrappedBaseAsset"];function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne,se=a.memo((function(e){var t=e.amountToSupply,r=e.poolAddress,n=e.isWrongNetwork,o=e.sx,l=e.symbol,c=e.blocked,d=e.decimals,p=e.isWrappedBaseAsset,m=(0,_.Z)(e,ee),x=(0,v.Yh)((function(e){return[e.tryPermit,e.supply,e.supplyWithPermit,e.walletApprovalMethodPreference,e.estimateGasLimit,e.addTransaction,e.currentMarketData]})),y=(0,W.Z)(x,7),f=y[0],b=y[1],h=y[2],j=y[3],g=y[4],C=y[5],O=y[6],w=(0,i.vR)(),S=w.approvalTxState,k=w.mainTxState,P=w.loadingTxns,A=w.setLoadingTxns,T=w.setApprovalTxState,E=w.setMainTxState,D=w.setGasLimit,I=w.setTxError,B=(0,z.n)(),N=B.refetchPoolData,M=B.refetchIncentiveData,F=B.refetchGhoData,te=f({reserveAddress:r,isWrappedBaseAsset:p}),ne=(0,Q.Z)().sendTx,se=(0,a.useState)(),oe=se[0],ae=se[1],ie=(0,G.y)(O,r),le=ie.data,ce=ie.refetch,ue=ie.isRefetching,de=ie.isFetchedAfterMount;A(ue);var pe=0!==Number(t)&&(0,Z.iv)({approvedAmount:(null===le||void 0===le?void 0:le.amount)||"0",amount:t,signedAmount:oe?oe.amount:"0"});pe&&null!==S&&void 0!==S&&S.success&&T({});var me=te&&j===K.n.PERMIT,xe=(0,V.M)({usePermit:me,approvedAmount:le,requiresApproval:pe,assetAddress:r,symbol:l,decimals:d,signatureAmount:t,onApprovalTxConfirmed:ce,onSignTxCompleted:function(e){return ae(e)}}).approval;(0,a.useEffect)((function(){de||ce()}),[ce,de]),(0,a.useEffect)((function(){var e=0;me?e=Number(u.eB[Y.UQ.supplyWithPermit].recommended):(e=Number(u.eB[Y.UQ.supply].recommended),pe&&!S.success&&(e+=Number(Z.pQ))),D(e.toString())}),[pe,S,me,D]);var ye=function(){var e=(0,L.Z)(H().mark((function e(){var n,s,o,a,i;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E(re(re({},k),{},{loading:!0})),s=Y.UQ.default,!me||!oe){e.next=16;break}return s=Y.UQ.supplyWithPermit,o=h({signature:oe.signature,amount:(0,q.parseUnits)(t,d).toString(),reserve:r,deadline:oe.deadline}),e.next=8,g(o);case 8:return o=e.sent,e.next=11,ne(o);case 11:return n=e.sent,e.next=14,n.wait(1);case 14:e.next=26;break;case 16:return s=Y.UQ.supply,a=b({amount:(0,q.parseUnits)(t,d).toString(),reserve:r}),e.next=20,g(a);case 20:return a=e.sent,e.next=23,ne(a);case 23:return n=e.sent,e.next=26,n.wait(1);case 26:E({txHash:n.hash,loading:!1,success:!0}),C(n.hash,{action:s,txState:"success",asset:r,amount:t,assetName:l}),U.queryClient.invalidateQueries({queryKey:$.B.pool}),N&&N(),M&&M(),F&&F(),e.next=39;break;case 34:e.prev=34,e.t0=e.catch(0),i=(0,X.WG)(e.t0,X.aD.GAS_ESTIMATION,!1),I(i),E({txHash:void 0,loading:!1});case 39:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(){return e.apply(this,arguments)}}();return(0,R.jsx)(J.B,re({blocked:c,mainTxState:k,approvalTxState:S,isWrongNetwork:n,requiresAmount:!0,amount:t,symbol:l,preparingTransactions:P||!le,actionText:(0,R.jsx)(s.cC,{id:"Supply {symbol}",values:{symbol:l}}),actionInProgressText:(0,R.jsx)(s.cC,{id:"Supplying {symbol}",values:{symbol:l}}),handleApproval:xe,handleAction:ye,requiresApproval:pe,tryPermit:te,sx:o},m))})),oe=r(83454);function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.CAP_REACHED=0]="CAP_REACHED"}(ne||(ne={}));var le=a.memo((function(e){var t,r=e.underlyingAsset,n=e.poolReserve,o=e.userReserve,l=e.isWrongNetwork,c=e.nativeBalance,E=e.tokenBalance,D=(0,w.HT)(),I=D.marketReferencePriceInUsd,L=D.user,W=(0,h.f)(),_=W.currentMarketData,F=W.currentNetworkConfig,H=(0,i.vR)(),Y=H.mainTxState,q=H.gasLimit,U=H.txError,z=(0,b.ov)(),V=z.supplyCap,G=z.debtCeiling,Q=(0,v.Yh)((function(e){return e.poolComputed.minRemainingBaseTokenBalance})),K=(0,a.useState)(""),X=K[0],$=K[1],J=r.toLowerCase()===u.hP.toLowerCase(),ee=J?c:E,te=n.supplyAPY,re=n.supplyCap,ne=n.totalLiquidity,ae=n.isFrozen,le=n.decimals,ce=n.debtCeiling,ue=n.isolationModeTotalDebt,de=(0,a.useMemo)((function(){return(0,j.I)(ee,{supplyCap:re,totalLiquidity:ne,isFrozen:ae,decimals:le,debtCeiling:ce,isolationModeTotalDebt:ue},r,Q)}),[ee,re,ne,ae,le,ce,ue,r,Q]),pe=new x.Z(X).multipliedBy(n.formattedPriceInMarketReferenceCurrency),me=pe.multipliedBy(I).shiftedBy(-d.$3),xe=L?(0,p.hE)(L.totalCollateralMarketReferenceCurrency).plus(pe):"-1",ye=L?(0,p.hE)(L.totalCollateralMarketReferenceCurrency).multipliedBy(L.currentLiquidationThreshold).plus(pe.multipliedBy(n.formattedReserveLiquidationThreshold)).dividedBy(xe):"-1",fe=X===de,be=L?(0,p.hE)(L.healthFactor):"-1";L&&(!L.isInIsolationMode&&!n.isIsolated||L.isInIsolationMode&&(null===(t=L.isolatedReserve)||void 0===t?void 0:t.underlyingAsset)===n.underlyingAsset)&&(be=(0,m.L1)({collateralBalanceMarketReferenceCurrency:xe,borrowBalanceMarketReferenceCurrency:(0,p.hE)(L.totalBorrowsMarketReferenceCurrency),currentLiquidationThreshold:ye}));var he=L.userReservesData.find((function(e){return e.usageAsCollateralEnabledOnUser&&e.reserve.id!==n.id})),ve=!L.isInIsolationMode&&n.isIsolated&&!he&&(!o||"0"===o.underlyingBalance||o.usageAsCollateralEnabledOnUser),je={address:n.aTokenAddress,symbol:n.iconSymbol,decimals:n.decimals,aToken:!0},ge=(0,Z.yI)(o,L.totalCollateralUSD,L.isInIsolationMode,G.isMaxed),Ce={amountToSupply:X,isWrongNetwork:l,poolAddress:J?u.hP:n.underlyingAsset,symbol:J?F.baseAssetSymbol:n.symbol,blocked:!1,decimals:n.decimals,isWrappedBaseAsset:n.isWrappedBaseAsset};return Y.success?(0,R.jsx)(A.R,{action:(0,R.jsx)(s.cC,{id:"Supplied"}),amount:X,symbol:J?F.baseAssetSymbol:n.symbol,addToken:je}):(0,R.jsxs)(R.Fragment,{children:[ve&&(0,R.jsx)(N.i,{asset:n.symbol}),V.determineWarningDisplay({supplyCap:V}),G.determineWarningDisplay({debtCeiling:G}),"AMPL"===n.symbol&&(0,R.jsx)(y.v,{sx:{mt:"16px",mb:"40px"},severity:"warning",children:(0,R.jsx)(f.v,{})}),"true"===oe.env.NEXT_PUBLIC_ENABLE_STAKING&&"YIELD"===n.symbol&&g.cr.staking(_)&&(0,R.jsx)(B,{}),"SNX"===n.symbol&&"0"!==de&&(0,R.jsx)(M,{}),(0,R.jsx)(k.W,{value:X,onChange:function(e){if("-1"===e)$(de);else{var t=(0,O.$w)(e,n.decimals);$(t)}},usdValue:me.toString(10),symbol:J?F.baseAssetSymbol:n.symbol,assets:[{balance:de,symbol:J?F.baseAssetSymbol:n.symbol,iconSymbol:J?F.baseAssetSymbol:n.iconSymbol}],capType:S.R.supplyCap,isMaxSelected:fe,disabled:Y.loading,maxValue:de,balanceText:(0,R.jsx)(s.cC,{id:"Wallet balance"}),event:{eventName:C.vh.MAX_INPUT_SELECTION,eventParams:{asset:n.underlyingAsset,assetName:n.name}}}),(0,R.jsxs)(T.m6,{gasLimit:q,skipLoad:!0,disabled:0===Number(X),children:[(0,R.jsx)(T.oD,{description:(0,R.jsx)(s.cC,{id:"Supply APY"}),value:te,percent:!0}),(0,R.jsx)(T.aE,{incentives:n.aIncentivesData,symbol:n.symbol}),(0,R.jsx)(T.Bx,{collateralType:ge}),(0,R.jsx)(T.jz,{visibleHfChange:!!X,healthFactor:L?L.healthFactor:"-1",futureHealthFactor:be.toString(10)})]}),U&&(0,R.jsx)(P.Q,{txError:U}),(0,R.jsx)(se,ie({},Ce))]})}));function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ue=function(){var e=(0,i.vR)(),t=e.type,r=e.close,a=e.args;return(0,R.jsx)(l.P,{open:t===i.w8.Supply,setOpen:r,children:(0,R.jsx)(c.A,{action:"supply",title:(0,R.jsx)(s.cC,{id:"Supply"}),underlyingAsset:a.underlyingAsset,requiredPermission:o.g.DEPOSITOR,children:function(e){return(0,R.jsx)(le,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}})})}},18384:function(e,t,r){r.d(t,{i:function(){return i}});var n=r(49501),s=r(29630),o=r(69331),a=r(85893),i=function(e){var t=e.asset,r=e.severity;return(0,a.jsxs)(o.v,{severity:r||"info",sx:{mb:3},children:[(0,a.jsx)(s.Z,{variant:"subheader1",mb:.5,children:(0,a.jsx)(n.cC,{id:"You are entering Isolation mode"})}),(0,a.jsx)(s.Z,{children:(0,a.jsx)(n.cC,{id:"In Isolation mode, you cannot supply other assets as collateral. A global debt ceiling limits the borrowing power of the isolated asset. To exit isolation mode disable {0} as collateral before borrowing another asset. Read more in our",values:{0:t||""}})})]})}},28744:function(e,t,r){r.d(t,{M:function(){return v}});var n=r(59499),s=r(50029),o=r(17674),a=r(87794),i=r.n(a),l=r(75331),c=r(80854),u=r(21046),d=r(56371),p=r(89291),m=r(77537),x=r(8656),y=r(39771),f=r(8195);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e){var t=e.usePermit,r=e.approvedAmount,n=e.requiresApproval,a=e.assetAddress,b=e.symbol,v=e.decimals,j=e.signatureAmount,g=e.onApprovalTxConfirmed,C=e.onSignTxCompleted,O=(0,x.Yh)((function(e){return[e.generateApproval,e.generateSignatureRequest,e.estimateGasLimit,e.addTransaction]})),w=(0,o.Z)(O,4),S=w[0],k=w[1],P=w[2],A=w[3],T=(0,m.Z)(),Z=T.signTxData,E=T.sendTx,D=(0,f.vR)(),I=D.approvalTxState,R=D.setApprovalTxState,B=D.setTxError,N=function(){var e=(0,s.Z)(i().mark((function e(){var s,o,m,x,f,O;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n||!r){e.next=30;break}if(!t){e.next=16;break}return R(h(h({},I),{},{loading:!0})),s=Math.floor(Date.now()/1e3+3600).toString(),e.next=7,k(h(h({},r),{},{deadline:s,amount:"-1"===j?u.Bz.toString():(0,d.parseUnits)(j,v).toString()}));case 7:return o=e.sent,e.next=10,Z(o);case 10:m=e.sent,C&&C({signature:m,deadline:s,amount:j}),B(void 0),R({txHash:p.Z,loading:!1,success:!0}),e.next=30;break;case 16:return x=S(r),R(h(h({},I),{},{loading:!0})),e.next=20,P(x);case 20:return x=e.sent,e.next=23,E(x);case 23:return f=e.sent,e.next=26,f.wait(1);case 26:R({txHash:f.hash,loading:!1,success:!0}),B(void 0),A(f.hash,{action:l.UQ.approval,txState:"success",asset:a,amount:c.ke,assetName:b}),g&&g();case 30:e.next=37;break;case 32:e.prev=32,e.t0=e.catch(0),O=(0,y.WG)(e.t0,y.aD.GAS_ESTIMATION,!1),B(O),R({txHash:void 0,loading:!1});case 37:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();return{approval:N}}},93591:function(e,t,r){r.d(t,{y:function(){return i}});var n=r(36492),s=r(8656),o=r(31001),a=r(12987),i=function(e,t){var r=(0,a.z)().approvedAmountService,i=(0,s.Yh)((function(e){return e.account}));return(0,n.a)({queryFn:function(){return r.getPoolApprovedAmount(e,i,t)},queryKey:o.B.poolApprovedAmount(i,t,e),enabled:!!i,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}},94847:function(e,t,r){r.d(t,{x:function(){return i},I:function(){return l}});var n=r(80854),s=r(1279),o=r(70794),a=r(87385);function i(e,t){return"0"===e?new o.Z(-1):new o.Z(e).minus(t)}function l(e,t,r,l){if(t.isFrozen)return"0";var c=(0,s.hE)(e);return c.gt(0)&&r.toLowerCase()===n.hP.toLowerCase()&&(c=c.minus(l)),"0"!==t.supplyCap&&(c=o.Z.min(c,i(t.supplyCap,t.totalLiquidity))),c.lte(0)?"0":(0,a.$w)(c.toString(10),t.decimals)}},7687:function(e,t,r){r.d(t,{r:function(){return d}});var n=r(67294),s=r(464),o=r(30081),a=r(91784),i=r(85945),l=r(37122),c=r(91670),u=r(38381);function d(e,t){const r=(0,i.NL)({context:e.context}),d=(0,l.S)(),p=(0,a._)(),m=r.defaultQueryOptions(e);m._optimisticResults=d?"isRestoring":"optimistic",m.onError&&(m.onError=o.V.batchCalls(m.onError)),m.onSuccess&&(m.onSuccess=o.V.batchCalls(m.onSuccess)),m.onSettled&&(m.onSettled=o.V.batchCalls(m.onSettled)),(0,u.Fb)(m),(0,c.pf)(m,p),(0,c.JN)(p);const[x]=n.useState((()=>new t(r,m))),y=x.getOptimisticResult(m);if((0,s.$)(n.useCallback((e=>d?()=>{}:x.subscribe(o.V.batchCalls(e))),[x,d]),(()=>x.getCurrentResult()),(()=>x.getCurrentResult())),n.useEffect((()=>{x.setOptions(m,{listeners:!1})}),[m,x]),(0,u.SB)(m,y,d))throw(0,u.j8)(m,x,p);if((0,c.KJ)({result:y,errorResetBoundary:p,useErrorBoundary:m.useErrorBoundary,query:x.getCurrentQuery()}))throw y.error;return m.notifyOnChangeProps?y:x.trackResult(y)}},36492:function(e,t,r){r.d(t,{a:function(){return a}});var n=r(32161),s=r(52924),o=r(7687);function a(e,t,r){const a=(0,n._v)(e,t,r);return(0,o.r)(a,s.z)}}}]);