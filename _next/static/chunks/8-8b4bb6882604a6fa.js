"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8],{76920:function(e,r,t){var n,i,s=t(67294);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o.apply(this,arguments)}r.Z=function(e){return s.createElement("svg",o({viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.78.628a.6.6 0 0 1 .42.572v3h2.4a.6.6 0 0 1 .492.944l-4.2 6A.6.6 0 0 1 4.8 10.8v-3H2.4a.6.6 0 0 1-.492-.944l4.2-6A.6.6 0 0 1 6.78.628Z",fill:"url(#lightningBoltGradient_svg__a)"})),i||(i=s.createElement("defs",null,s.createElement("linearGradient",{id:"lightningBoltGradient_svg__a",x1:10.2,y1:4.672,x2:1.345,y2:7.335,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#fed087"}),s.createElement("stop",{offset:1,stopColor:"#fed087"})))))}},60008:function(e,r,t){t.d(r,{Fy:function(){return V},_h:function(){return i}});var n,i,s=t(49501),o=t(48949),a=t(80227),l=t(29630),d=t(81645),c=t(68346),u=t(61953),x=t(67294),m=t(41024),h=t(92391),j=t(69331),E=t(34220),p=t(43478),v=t(8195),g=t(46930),f=t(77537),b=t(25298),I=t(76920),C=t(63491),y=t(67916),S=t(93608),O=t(20644),N=t(78944),Z=t(10343),T=t(50029),_=t(87794),M=t.n(_),A=t(75331),D=t(89291),w=t(8656),k=t(67489),F=t(32667),L=t(85893),B=function(e){var r=e.isWrongNetwork,t=e.blocked,n=e.selectedEmode,i=e.activeEmode,o=e.eModes,a=(0,w.Yh)((function(e){return e.setUserEMode})),l=(0,D.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,T.Z)(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(n));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:t,deps:[n],protocolAction:A.UQ.setEModeUsage,eventTxInfo:{previousState:(0,F.U)(o[i].label),newState:(0,F.U)(o[n].label)}}),d=l.action,c=l.loadingTxns,u=l.mainTxState,x=l.requiresApproval;return(0,L.jsx)(k.B,{requiresApproval:x,blocked:t,mainTxState:u,preparingTransactions:c,handleAction:d,actionText:0===i?(0,L.jsx)(s.cC,{id:"Enable E-Mode"}):0!==n?(0,L.jsx)(s.cC,{id:"Switch E-Mode"}):(0,L.jsx)(s.cC,{id:"Disable E-Mode"}),actionInProgressText:0===i?(0,L.jsx)(s.cC,{id:"Enabling E-Mode"}):0!==n?(0,L.jsx)(s.cC,{id:"Switching E-Mode"}):(0,L.jsx)(s.cC,{id:"Disabling E-Mode"}),isWrongNetwork:r})},U=t(4535),R=t(55343),W=t(31538),H=t(92012),P=function(e){var r=e.emodeCategories,t=e.selectedEmode,n=e.setSelectedEmode,i=e.userEmode;return(0,L.jsxs)(R.Z,{sx:{mb:1,width:"100%"},children:[(0,L.jsx)(U.Z,{sx:{mb:1,color:"text.secondary"},children:(0,L.jsx)(s.cC,{id:"Asset category"})}),(0,L.jsx)(H.Z,{defaultValue:0,value:t,onChange:function(e){n(r[Number(e.target.value)])},className:"EmodeSelect","data-cy":"EmodeSelect",sx:{width:"100%",height:"44px",borderRadius:"6px",borderColor:"divider",outline:"none !important",color:"text.primary",".MuiOutlinedInput-input":{backgroundColor:"transparent"},".MuiOutlinedInput-notchedOutline, .MuiOutlinedInput-notchedOutline":{borderColor:"divider",outline:"none !important",borderWidth:"1px"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"divider",borderWidth:"1px"},"&.EmodeSelect .MuiSelect-icon":{color:"text.primary"}},native:!1,renderValue:function(e){return 0!==e?(0,L.jsx)(l.Z,{color:"text.primary",children:(0,F.U)(r[e].label)}):(0,L.jsx)(l.Z,{color:"text.muted",children:(0,L.jsx)(s.cC,{id:"Select"})})},children:Object.keys(r).map((function(e){if(i!==Number(e)&&0!==Number(e))return(0,L.jsx)(W.Z,{value:r[Number(e)].id,children:(0,L.jsx)(l.Z,{color:"text.primary",children:(0,F.U)(r[Number(e)].label)})},"emode-".concat(r[Number(e)].id))}))})]})};!function(e){e[e.EMODE_DISABLED_LIQUIDATION=0]="EMODE_DISABLED_LIQUIDATION",e[e.CLOSE_POSITIONS_BEFORE_SWITCHING=1]="CLOSE_POSITIONS_BEFORE_SWITCHING"}(n||(n={})),function(e){e.ENABLE="Enable",e.DISABLE="Disable",e.SWITCH="Switch"}(i||(i={}));var V=function(e){var r=e.mode,t=(0,E.HT)(),T=t.user,_=t.reserves,M=t.eModes,A=t.marketReferenceCurrencyDecimals,D=t.marketReferencePriceInUsd,w=t.userReserves,k=(0,g.f)().currentChainId,U=(0,f.Z)(),R=U.chainId,W=U.readOnlyModeAddress,H=(0,p.p)(1),V=(0,v.vR)(),G=V.gasLimit,Q=V.mainTxState,q=V.txError,z=(0,x.useState)(function(e,r,t){var n=Object.keys(r).length;if(e===i.ENABLE){if(n>2)return;return r[1]}if(e===i.SWITCH){if(n>3)return;return 1===t?r[2]:r[1]}return r[0]}(r,M,T.userEmodeCategoryId)),X=z[0],Y=z[1],J=(0,b.Mo)(k),K=(0,o.G)({currentTimestamp:H,userReserves:w,formattedReserves:_,userEmodeCategoryId:X?X.id:0,marketReferenceCurrencyDecimals:A,marketReferencePriceInUsd:D}),$=void 0;if(T.isInEmode&&0===(null===X||void 0===X?void 0:X.id))Number(K.healthFactor)<1.01&&"-1"!==K.healthFactor&&($=n.EMODE_DISABLED_LIQUIDATION);else if(X&&T.userEmodeCategoryId!==(null===X||void 0===X?void 0:X.id)){T.userReservesData.some((function(e){return(Number(e.scaledVariableDebt)>0||Number(e.principalStableDebt)>0)&&e.reserve.eModeCategoryId!==(null===X||void 0===X?void 0:X.id)}))&&($=n.CLOSE_POSITIONS_BEFORE_SWITCHING)}var ee=function(){switch($){case n.CLOSE_POSITIONS_BEFORE_SWITCHING:return(0,L.jsx)(j.v,{severity:"info",sx:{mt:6,alignItems:"center"},children:(0,L.jsx)(l.Z,{variant:"caption",children:(0,L.jsx)(s.cC,{id:"To enable E-mode for the {0} category, all borrow positions outside of this category must be closed.",values:{0:X&&(0,F.U)(X.label)}})})});case n.EMODE_DISABLED_LIQUIDATION:return(0,L.jsxs)(j.v,{severity:"error",sx:{mt:6,alignItems:"center"},children:[(0,L.jsx)(l.Z,{variant:"subheader1",color:"#4F1919",children:(0,L.jsx)(s.cC,{id:"Cannot disable E-Mode"})}),(0,L.jsx)(l.Z,{variant:"caption",children:(0,L.jsx)(s.cC,{id:"You can not disable E-Mode as your current collateralization level is above 80%, disabling E-Mode can cause liquidation. To exit E-Mode supply or repay borrowed positions."})})]});default:return null}},re=Object.keys(M).length>=3&&r===i.ENABLE||Object.keys(M).length>=4&&r===i.SWITCH,te=k!==R,ne=function(){return(0,L.jsx)(d.Z,{color:"primary",sx:{fontSize:"14px",mx:1},children:(0,L.jsx)(a.Z,{})})},ie=!!X&&0===X.id&&void 0===$&&Number(K.healthFactor).toFixed(3)<Number(T.healthFactor).toFixed(3),se="0"!==T.currentLoanToValue&&Number(K.currentLoanToValue).toFixed(3)!=Number(T.currentLoanToValue).toFixed(3);return q&&q.blocking?(0,L.jsx)(C.D,{txError:q}):Q.success?(0,L.jsx)(S.R,{action:(0,L.jsx)(s.cC,{id:"Emode"})}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(N.E,{title:"".concat(r," E-Mode")}),te&&!W&&(0,L.jsx)(Z.I,{networkName:J.name,chainId:k}),0===T.userEmodeCategoryId&&(0,L.jsx)(j.v,{severity:"warning",children:(0,L.jsx)(l.Z,{variant:"caption",children:(0,L.jsx)(s.cC,{id:"Enabling E-Mode only allows you to borrow assets belonging to the selected category. Please visit our <0>FAQ guide</0> to learn more about how it works and the applied restrictions.",components:{0:(0,L.jsx)(c.Z,{href:"https://docs.aave.com/faq/aave-v3-features#high-efficiency-mode-e-mode",target:"_blank",rel:"noopener"})}})})}),re&&(0,L.jsx)(P,{emodeCategories:M,selectedEmode:null===X||void 0===X?void 0:X.id,setSelectedEmode:Y,userEmode:T.userEmodeCategoryId}),$===n.EMODE_DISABLED_LIQUIDATION&&(0,L.jsx)(ee,{}),ie&&(0,L.jsxs)(j.v,{severity:"error",sx:{mt:6,alignItems:"center"},children:[(0,L.jsx)(l.Z,{variant:"subheader1",color:"#4F1919",children:(0,L.jsx)(s.cC,{id:"Liquidation risk"})}),(0,L.jsx)(l.Z,{variant:"caption",children:(0,L.jsx)(s.cC,{id:"This action will reduce your health factor. Please be mindful of the increased risk of collateral liquidation."})})]}),(0,L.jsxs)(O.m6,{gasLimit:G,children:[!re&&(0,L.jsx)(h.X,{caption:(0,L.jsx)(s.cC,{id:"E-Mode category"}),captionVariant:"description",mb:4,children:(0,L.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"right",alignItems:"center"},children:[(0,L.jsx)(u.Z,{sx:{display:"inline-flex",alignItems:"center",mx:1},children:0!==T.userEmodeCategoryId?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(d.Z,{sx:{fontSize:"12px"},children:(0,L.jsx)(I.Z,{})}),(0,L.jsx)(l.Z,{variant:"subheader1",children:(0,F.U)(M[T.userEmodeCategoryId].label)})]}):(0,L.jsx)(l.Z,{variant:"subheader1",children:(0,L.jsx)(s.cC,{id:"None"})})}),X&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ne,{}),(0,L.jsx)(u.Z,{sx:{display:"inline-flex",alignItems:"center"},children:0!==X.id?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(d.Z,{sx:{fontSize:"12px",mr:.5},children:(0,L.jsx)(I.Z,{})}),(0,L.jsx)(l.Z,{variant:"subheader1",children:(0,F.U)(M[X.id].label)})]}):(0,L.jsx)(l.Z,{variant:"subheader1",children:(0,L.jsx)(s.cC,{id:"None"})})})]})]})}),(0,L.jsx)(h.X,{caption:(0,L.jsx)(s.cC,{id:"Available assets"}),captionVariant:"description",mb:4,sx:{alignContent:"flex-end"},children:(0,L.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"right",alignItems:"center"},children:[M[T.userEmodeCategoryId]&&(0,L.jsx)(u.Z,{sx:{display:"flex",alignItems:"center",textAlign:"end"},children:0!==T.userEmodeCategoryId?(0,L.jsx)(l.Z,{sx:{textAlign:"end"},children:M[T.userEmodeCategoryId].assets.join(", ")}):(0,L.jsx)(l.Z,{children:(0,L.jsx)(s.cC,{id:"All Assets"})})}),X&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ne,{}),(0,L.jsx)(u.Z,{sx:{display:"flex",alignItems:"center",textAlign:"end"},children:0!==(null===X||void 0===X?void 0:X.id)?(0,L.jsx)(l.Z,{sx:{textAlign:"end"},children:X.assets.join(", ")}):(0,L.jsx)(l.Z,{children:(0,L.jsx)(s.cC,{id:"All Assets"})})})]})]})}),(0,L.jsx)(O.jz,{visibleHfChange:!!X,healthFactor:T.healthFactor,futureHealthFactor:K.healthFactor}),se&&(0,L.jsx)(h.X,{caption:(0,L.jsx)(s.cC,{id:"Maximum loan to value"}),captionVariant:"description",mb:4,align:"flex-start",children:(0,L.jsx)(u.Z,{sx:{textAlign:"right"},children:(0,L.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,L.jsx)(m.B,{value:T.currentLoanToValue,sx:{color:"text.primary"},visibleDecimals:2,compact:!0,percent:!0,variant:"secondary14"}),void 0!==X&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ne,{}),(0,L.jsx)(m.B,{value:K.currentLoanToValue,sx:{color:"text.primary"},visibleDecimals:2,compact:!0,percent:!0,variant:"secondary14"})]})]})})})]}),$===n.CLOSE_POSITIONS_BEFORE_SWITCHING&&(0,L.jsx)(ee,{}),q&&(0,L.jsx)(y.Q,{txError:q}),(0,L.jsx)(B,{isWrongNetwork:te,blocked:void 0!==$||!X,selectedEmode:(null===X||void 0===X?void 0:X.id)||0,activeEmode:T.userEmodeCategoryId,eModes:M})]})}}}]);