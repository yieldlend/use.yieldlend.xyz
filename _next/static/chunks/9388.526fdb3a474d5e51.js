"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9388],{89388:function(e,t,n){n.r(t),n.d(t,{StakeModal:function(){return F}});var r=n(67294),o=n(8195),a=n(31959),i=n(49501),s=n(1279),c=n(29630),u=n(77912),l=n(60265),d=n(77537),p=n(8656),v=n(84568),m=n(25298),k=n(57609),x=n(54401),f=n(53601),b=n(63491),h=n(67916),g=n(93608),j=n(57824),y=n(78944),N=n(10343),T=n(59499),O=n(50029),S=n(4730),A=n(87794),E=n.n(A),w=n(75331),P=n(89291),C=n(67489),_=n(85893),I=["amountToStake","isWrongNetwork","sx","symbol","blocked","selectedToken","event"];function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var W,D=function(e){var t=e.amountToStake,n=e.isWrongNetwork,r=e.sx,o=e.symbol,a=e.blocked,s=e.selectedToken,c=(e.event,(0,S.Z)(e,I)),u=(0,p.Yh)(),l=u.stake,d=u.stakeWithPermit,v=(0,P.Q)({tryPermit:"aave"===s,permitAction:w.UQ.stakeWithPermit,protocolAction:w.UQ.stake,handleGetTxns:function(){var e=(0,O.Z)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l({token:s,amount:t.toString()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),handleGetPermitTxns:function(){var e=(0,O.Z)(E().mark((function e(n,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d({token:s,amount:t.toString(),signature:n[0],deadline:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),eventTxInfo:{amount:t,assetName:s},skip:!t||0===parseFloat(t)||a,deps:[t,s]}),m=v.action,k=v.approval,x=v.requiresApproval,f=v.loadingTxns,b=v.approvalTxState,h=v.mainTxState;return(0,_.jsx)(C.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,T.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({requiresApproval:x,preparingTransactions:f,mainTxState:h,approvalTxState:b,isWrongNetwork:n,amount:t,handleAction:m,handleApproval:function(){return k([{amount:t,underlyingAsset:s,permitType:"STAKE"}])},symbol:o,requiresAmount:!0,actionText:(0,_.jsx)(i.cC,{id:"Stake"}),tryPermit:"aave"===s,actionInProgressText:(0,_.jsx)(i.cC,{id:"Staking"}),sx:r},c))};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE"}(W||(W={}));var B=function(e){var t=e.stakeAssetName,n=e.icon,a=(0,d.Z)(),T=a.chainId,O=a.readOnlyModeAddress,S=(0,o.vR)(),A=S.gasLimit,E=S.mainTxState,w=S.txError,P=(0,p.Yh)((function(e){return e.currentMarketData})),C=(0,p.Yh)((function(e){return e.currentNetworkConfig})),I=(0,p.Yh)((function(e){return e.currentChainId})),U=(0,l.f)(P).data,B=(0,u.I)(P).data,F=null===B||void 0===B?void 0:B[t],G=(0,r.useState)(""),L=G[0],M=G[1],Z=(0,r.useRef)(),R=(0,s.Fv)((null===U||void 0===U?void 0:U[t].underlyingTokenUserBalance)||"0",18),H="-1"===L,Q=H?R:L,Y=Number(Q)*(Number((0,s.Fv)((null===F||void 0===F?void 0:F.stakeTokenPriceEth)||1,18))*Number((0,s.Fv)((null===B||void 0===B?void 0:B.ethPriceUsd)||1,8))),q=void 0;(0,s.hE)(Q).gt(R)&&(q=W.NOT_ENOUGH_BALANCE);var K=C.isFork&&C.underlyingChainId===v.X.chainId?I:v.X.chainId,V=T!==K,X=(0,m.Mo)(K);return w&&w.blocking?(0,_.jsx)(b.D,{txError:w}):E.success?(0,_.jsx)(g.R,{action:(0,_.jsx)(i.cC,{id:"Staked"}),amount:Z.current,symbol:n}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(y.E,{title:"Stake",symbol:n}),V&&!O&&(0,_.jsx)(N.I,{networkName:X.name,chainId:K,funnel:"Stake Modal"}),(0,_.jsx)(x.$,{}),(0,_.jsx)(f.W,{value:Q,onChange:function(e){var t="-1"===e;Z.current=t?R:e,M(e)},usdValue:Y.toString(),symbol:n,assets:[{balance:R.toString(),symbol:n}],isMaxSelected:H,maxValue:R.toString(),balanceText:(0,_.jsx)(i.cC,{id:"Wallet balance"})}),void 0!==q&&(0,_.jsx)(c.Z,{variant:"helperText",color:"red",children:q===W.NOT_ENOUGH_BALANCE?(0,_.jsx)(i.cC,{id:"Not enough balance on your wallet"}):null}),(0,_.jsx)(j.m6,{gasLimit:A,children:(0,_.jsx)(j.oD,{description:(0,_.jsx)(i.cC,{id:"Staking APR"}),value:Number((null===F||void 0===F?void 0:F.stakeApy)||"0")/1e4,percent:!0})}),w&&(0,_.jsx)(h.Q,{txError:w}),(0,_.jsx)(D,{sx:{mt:"48px"},amountToStake:Q,isWrongNetwork:V,symbol:n,blocked:void 0!==q,selectedToken:t,event:k.so.STAKE_TOKEN})]})},F=function(){var e=(0,o.vR)(),t=e.type,n=e.close,r=e.args;return(0,_.jsx)(a.P,{open:t===o.w8.Stake,setOpen:n,children:(null===r||void 0===r?void 0:r.icon)&&(null===r||void 0===r?void 0:r.stakeAssetName)&&(0,_.jsx)(B,{icon:r.icon,stakeAssetName:r.stakeAssetName})})}}}]);