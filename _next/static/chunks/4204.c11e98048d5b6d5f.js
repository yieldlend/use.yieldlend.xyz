"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4204],{34204:function(e,r,t){t.r(r),t.d(r,{CollateralChangeModal:function(){return w}});var s,n=t(59499),a=t(49501),o=(t(67294),t(8195)),l=t(31959),i=t(32993),c=t(1279),u=t(20854),d=t(29630),_=t(69331),C=t(34220),b=t(43629),h=t(67916),A=t(93608),g=t(20644),y=t(94671),E=t(18384),O=t(50029),T=t(87794),p=t.n(T),x=t(75331),v=t(89291),f=t(16376),S=t(67489),R=t(85893),j=function(e){var r=e.poolReserve,t=e.isWrongNetwork,s=e.usageAsCollateral,n=e.blocked,o=e.symbol,l=(0,f.Yh)((function(e){return e.setUsageAsCollateral})),i=(0,v.Q)({tryPermit:!1,protocolAction:x.UQ.setUsageAsCollateral,eventTxInfo:{assetName:r.name,asset:r.underlyingAsset,previousState:(!s).toString(),newState:s.toString()},handleGetTxns:function(){var e=(0,O.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l({reserve:r.underlyingAsset,usageAsCollateral:s}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:n}),c=i.action,u=i.loadingTxns,d=i.mainTxState,_=i.requiresApproval;return(0,R.jsx)(S.B,{requiresApproval:_,blocked:n,preparingTransactions:u,mainTxState:d,isWrongNetwork:t,actionText:s?(0,R.jsx)(a.cC,{id:"Enable {symbol} as collateral",values:{symbol:o}}):(0,R.jsx)(a.cC,{id:"Disable {symbol} as collateral",values:{symbol:o}}),actionInProgressText:(0,R.jsx)(a.cC,{id:"Pending..."}),handleAction:c})};!function(e){e[e.DO_NOT_HAVE_SUPPLIES_IN_THIS_CURRENCY=0]="DO_NOT_HAVE_SUPPLIES_IN_THIS_CURRENCY",e[e.CAN_NOT_USE_THIS_CURRENCY_AS_COLLATERAL=1]="CAN_NOT_USE_THIS_CURRENCY_AS_COLLATERAL",e[e.CAN_NOT_SWITCH_USAGE_AS_COLLATERAL_MODE=2]="CAN_NOT_SWITCH_USAGE_AS_COLLATERAL_MODE",e[e.ZERO_LTV_WITHDRAW_BLOCKED=3]="ZERO_LTV_WITHDRAW_BLOCKED"}(s||(s={}));var m=function(e){var r=e.poolReserve,t=e.userReserve,n=e.isWrongNetwork,l=e.symbol,i=(0,o.vR)(),O=i.gasLimit,T=i.mainTxState,p=i.txError,x=(0,C.HT)().user,v=(0,b.ov)().debtCeiling,f=!t.usageAsCollateralEnabledOnUser,S=(0,c.hE)(x.totalCollateralMarketReferenceCurrency),m=!r.isIsolated&&f,L=!r.isIsolated&&!f,w=r.isIsolated&&f,N=r.isIsolated&&!f,I=S[f?"plus":"minus"](t.underlyingBalanceMarketReferenceCurrency),H=(0,u.L1)({collateralBalanceMarketReferenceCurrency:I,borrowBalanceMarketReferenceCurrency:x.totalBorrowsMarketReferenceCurrency,currentLiquidationThreshold:x.currentLiquidationThreshold}),U=(0,y.Vc)(x),D=void 0;U.length>0&&!U.includes(r.symbol)?D=s.ZERO_LTV_WITHDRAW_BLOCKED:(0,c.hE)(t.underlyingBalance).eq(0)?D=s.DO_NOT_HAVE_SUPPLIES_IN_THIS_CURRENCY:!t.usageAsCollateralEnabledOnUser&&"0"===r.reserveLiquidationThreshold||"0"===r.reserveLiquidationThreshold?D=s.CAN_NOT_USE_THIS_CURRENCY_AS_COLLATERAL:t.usageAsCollateralEnabledOnUser&&"0"!==x.totalBorrowsMarketReferenceCurrency&&H.lte("1")&&(D=s.CAN_NOT_SWITCH_USAGE_AS_COLLATERAL_MODE);var k=function(){switch(D){case s.DO_NOT_HAVE_SUPPLIES_IN_THIS_CURRENCY:return(0,R.jsx)(a.cC,{id:"You do not have supplies in this currency"});case s.CAN_NOT_USE_THIS_CURRENCY_AS_COLLATERAL:return(0,R.jsx)(a.cC,{id:"You can not use this currency as collateral"});case s.CAN_NOT_SWITCH_USAGE_AS_COLLATERAL_MODE:return(0,R.jsx)(a.cC,{id:"You can not switch usage as collateral mode for this currency, because it will cause collateral call"});case s.ZERO_LTV_WITHDRAW_BLOCKED:return(0,R.jsx)(a.cC,{id:"Assets with zero LTV ({assetsBlockingWithdraw}) must be withdrawn or disabled as collateral to perform this action",values:{assetsBlockingWithdraw:U}});default:return null}};return T.success?(0,R.jsx)(A.R,{collateral:f,symbol:r.symbol}):(0,R.jsxs)(R.Fragment,{children:[m&&(0,R.jsx)(_.v,{severity:"warning",icon:!1,sx:{mb:3},children:(0,R.jsx)(a.cC,{id:"Enabling this asset as collateral increases your borrowing power and Health Factor. However, it can get liquidated if your health factor drops below 1."})}),L&&(0,R.jsx)(_.v,{severity:"warning",icon:!1,sx:{mb:3},children:(0,R.jsx)(a.cC,{id:"Disabling this asset as collateral affects your borrowing power and Health Factor."})}),w&&(0,R.jsx)(E.i,{asset:r.symbol}),N&&(0,R.jsx)(_.v,{severity:"info",icon:!1,sx:{mb:3},children:(0,R.jsx)(a.cC,{id:"You will exit isolation mode and other tokens can now be used as collateral"})}),r.isIsolated&&v.determineWarningDisplay({debtCeiling:v}),(0,R.jsxs)(g.m6,{gasLimit:O,children:[(0,R.jsx)(g.oD,{symbol:r.symbol,iconSymbol:r.iconSymbol,description:(0,R.jsx)(a.cC,{id:"Supply balance"}),value:t.underlyingBalance}),(0,R.jsx)(g.jz,{visibleHfChange:!0,healthFactor:x.healthFactor,futureHealthFactor:H.toString(10)})]}),void 0!==D&&(0,R.jsx)(d.Z,{variant:"helperText",color:"error.main",children:(0,R.jsx)(k,{})}),p&&(0,R.jsx)(h.Q,{txError:p}),(0,R.jsx)(j,{symbol:l,poolReserve:r,usageAsCollateral:f,isWrongNetwork:n,blocked:void 0!==D})]})};function L(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}var w=function(){var e=(0,o.vR)(),r=e.type,t=e.close,s=e.args;return(0,R.jsx)(l.P,{open:r===o.w8.CollateralChange,setOpen:t,children:(0,R.jsx)(i.A,{title:(0,R.jsx)(a.cC,{id:"Review tx"}),underlyingAsset:s.underlyingAsset,children:function(e){return(0,R.jsx)(m,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?L(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e))}})})}},18384:function(e,r,t){t.d(r,{i:function(){return l}});var s=t(49501),n=t(29630),a=t(69331),o=t(85893),l=function(e){var r=e.asset,t=e.severity;return(0,o.jsxs)(a.v,{severity:t||"info",sx:{mb:3},children:[(0,o.jsx)(n.Z,{variant:"subheader1",mb:.5,children:(0,o.jsx)(s.cC,{id:"You are entering Isolation mode"})}),(0,o.jsx)(n.Z,{children:(0,o.jsx)(s.cC,{id:"In Isolation mode, you cannot supply other assets as collateral. A global debt ceiling limits the borrowing power of the isolated asset. To exit isolation mode disable {0} as collateral before borrowing another asset. Read more in our",values:{0:r||""}})})]})}}}]);