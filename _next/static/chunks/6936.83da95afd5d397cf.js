"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6936],{84734:function(e,t,r){r.d(t,{v:function(){return a}});var n=r(49501),s=r(68861),o=r(85893),a=function(){return(0,o.jsx)(n.cC,{id:"<0>Ampleforth</0> is a rebasing asset. Visit the <1>documentation</1> to learn more.",components:{0:(0,o.jsx)("b",{}),1:(0,o.jsx)(s.rU,{href:"https://docs.aave.com/developers/v/2.0/guides/ampl-asset-listing",underline:"always"})}})}},81902:function(e,t,r){var n;r.d(t,{R:function(){return n}}),function(e){e.supplyCap="supplyCap",e.borrowCap="borrowCap"}(n||(n={}))},25049:function(e,t,r){r.d(t,{Y:function(){return d}});var n=r(59499),s=r(4730),o=r(49501),a=r(81902),i=r(58527),l=r(85893),c=["capType"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(e){var t=e.capType,r=(0,s.Z)(e,c),n=t===a.R.supplyCap?(0,l.jsx)(o.cC,{id:"This is the total amount that you are able to supply to in this reserve. You are able to supply your wallet balance up until the supply cap is reached."}):(0,l.jsx)(o.cC,{id:"This is the total amount available for you to borrow. You can borrow based on your collateral and until the borrow cap is reached."});return(0,l.jsx)(i.G,p(p({},r),{},{children:n}))}},31001:function(e,t,r){r.d(t,{l:function(){return T},W:function(){return k}});var n=r(59499),s=r(4730),o=r(49501),a=r(33740),i=r(62097),l=r(30120),c=r(29630),u=r(90149),p=r(81011),d=r(80562),y=r(55343),m=r(92012),b=r(31538),f=r(61702),x=r(75084),h=r(67294),v=r(57333),g=r(16376),j=r(25049),O=r(41024),S=r(72667),w=r(85893),C=["onChange"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=h.forwardRef((function(e,t){var r=e.onChange,n=(0,s.Z)(e,C);return(0,w.jsx)(v.Z,A(A({},n),{},{getInputRef:t,onValueChange:function(t){t.value!==e.value&&r({target:{name:e.name,value:t.value||""}})},thousandSeparator:!0,isNumericString:!0,allowNegative:!1}))})),k=function(e){var t=e.value,r=e.usdValue,n=e.symbol,s=e.onChange,h=e.disabled,v=e.disableInput,C=e.onSelect,P=e.assets,k=e.capType,E=e.maxValue,I=e.isMaxSelected,Z=e.inputTitle,D=e.balanceText,B=e.loading,R=void 0!==B&&B,N=e.event,M=e.selectOptionHeader,L=e.selectOption,_=e.sx,W=void 0===_?{}:_,U=(0,i.Z)(),q=(0,g.Yh)((function(e){return e.trackEvent})),F=1===P.length?P[0]:P&&P.find((function(e){return e.symbol===n}));return(0,w.jsxs)(l.Z,A(A({},W),{},{children:[(0,w.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,w.jsx)(c.Z,{color:"text.secondary",children:Z||(0,w.jsx)(o.cC,{id:"Amount"})}),k&&(0,w.jsx)(j.Y,{capType:k})]}),(0,w.jsxs)(l.Z,{sx:function(e){return{p:"8px 12px",border:"1px solid ".concat(e.palette.divider),borderRadius:"6px",mb:1}},children:[(0,w.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",mb:.5},children:[R?(0,w.jsx)(l.Z,{sx:{flex:1},children:(0,w.jsx)(u.Z,{color:"inherit",size:"16px"})}):(0,w.jsx)(p.ZP,{sx:{flex:1},placeholder:"0.00",disabled:h||v,value:t,autoFocus:!0,onChange:function(e){s&&(Number(e.target.value)>Number(E)?s("-1"):s(e.target.value))},inputProps:{"aria-label":"amount input",style:{fontSize:"21px",lineHeight:"28,01px",padding:0,height:"28px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},inputComponent:T}),""!==t&&!v&&(0,w.jsx)(d.Z,{sx:{minWidth:0,p:0,left:8,zIndex:1,color:"text.muted","&:hover":{color:"text.secondary"}},onClick:function(){s&&s("")},disabled:h,children:(0,w.jsx)(a.Z,{height:16})}),C&&1!==P.length?(0,w.jsx)(y.Z,{children:(0,w.jsxs)(m.Z,{disabled:h,value:F.symbol,onChange:function(e){var t=P.find((function(t){return t.symbol===e.target.value}));C&&C(t),s&&s("")},variant:"outlined",className:"AssetInput__select","data-cy":"assetSelect",MenuProps:{sx:{maxHeight:"240px",".MuiPaper-root":{border:"dark"===U.palette.mode?"1px solid #EBEBED1F":"unset",boxShadow:"0px 2px 10px 0px #0000001A"}}},sx:{p:0,"&.AssetInput__select .MuiOutlinedInput-input":{p:0,backgroundColor:"transparent",pr:"24px !important"},"&.AssetInput__select .MuiOutlinedInput-notchedOutline":{display:"none"},"&.AssetInput__select .MuiSelect-icon":{color:"text.primary",right:"0%"}},renderValue:function(e){var t=1===P.length?P[0]:P&&P.find((function(t){return t.symbol===e}));return(0,w.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},"data-cy":"assetsSelectedOption_".concat(t.symbol.toUpperCase()),children:[(0,w.jsx)(S.T1,{symbol:t.iconSymbol||t.symbol,aToken:t.aToken,sx:{mr:2,ml:4}}),(0,w.jsx)(c.Z,{variant:"main16",color:"text.primary",children:e})]})},children:[M||void 0,P.map((function(e){return(0,w.jsx)(b.Z,{value:e.symbol,"data-cy":"assetsSelectOption_".concat(e.symbol.toUpperCase()),children:L?L(e):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(S.T1,{aToken:e.aToken,symbol:e.iconSymbol||e.symbol,sx:{fontSize:"22px",mr:1}}),(0,w.jsx)(f.Z,{sx:{mr:6},children:e.symbol}),e.balance&&(0,w.jsx)(O.B,{value:e.balance,compact:!0})]})},e.symbol)}))]})}):(0,w.jsxs)(l.Z,{sx:{display:"inline-flex",alignItems:"center"},children:[(0,w.jsx)(S.T1,{aToken:F.aToken,symbol:F.iconSymbol||F.symbol,sx:{mr:2,ml:4}}),(0,w.jsx)(c.Z,{variant:"h3",sx:{lineHeight:"28px"},"data-cy":"inputAsset",children:n})]})]}),(0,w.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",height:"16px"},children:[R?(0,w.jsx)(l.Z,{sx:{flex:1}}):(0,w.jsx)(O.B,{value:isNaN(Number(r))?0:Number(r),compact:!0,symbol:"USD",variant:"secondary12",color:"text.muted",symbolsColor:"text.muted",flexGrow:1}),F.balance&&s&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(c.Z,{component:"div",variant:"secondary12",color:"text.secondary",children:[D&&""!==D?D:(0,w.jsx)(o.cC,{id:"Balance"})," ",(0,w.jsx)(O.B,{value:F.balance,compact:!0,variant:"secondary12",color:"text.secondary",symbolsColor:"text.disabled"})]}),!v&&(0,w.jsx)(x.Z,{size:"small",sx:{minWidth:0,ml:"7px",p:0},onClick:function(){N&&q(N.eventName,A({},N.eventParams)),s("-1")},disabled:h||I,children:(0,w.jsx)(o.cC,{id:"Max"})})]})]})]})]}))}},86936:function(e,t,r){r.r(t),r.d(t,{SupplyModal:function(){return ue}});var n=r(59499),s=r(49501),o=r(23286),a=r(67294),i=r(8195),l=r(31959),c=r(32993),u=r(80854),p=r(82403),d=r(1279),y=r(20854),m=r(70794),b=r(69331),f=r(84734),x=r(43629),h=r(46930),v=r(16376),g=r(94847),j=r(25298),O=r(57609),S=r(87385),w=r(34220),C=r(81902),P=r(31001),A=r(67916),T=r(93608),k=r(20644),E=r(94671),I=r(29630),Z=r(68346),D=r(68861),B=r(85893),R=function(){return(0,B.jsx)(b.v,{severity:"info",children:(0,B.jsxs)(I.Z,{children:[(0,B.jsx)(s.cC,{id:"Supplying your"})," YIELD"," ",(0,B.jsx)(s.cC,{id:"tokens is not the same as staking them. If you wish to stake your"})," YIELD"," ",(0,B.jsx)(s.cC,{id:"tokens, please go to the"})," ",(0,B.jsx)(Z.Z,{href:D.Z6.staking,children:(0,B.jsx)(s.cC,{id:"staking view"})})]})})},N=r(18384),M=function(){return(0,B.jsx)(b.v,{severity:"warning",children:(0,B.jsxs)(I.Z,{children:[(0,B.jsx)(s.cC,{id:"Before supplying"})," SNX"," ",(0,B.jsx)(s.cC,{id:"please check that the amount you want to supply is not currently being used for staking. If it is being used for staking, your transaction might fail."})]})})},L=r(50029),_=r(17674),W=r(4730),U=r(87794),q=r.n(U),F=r(75331),Y=r(56371),H=r(53670),z=r(19419),G=r(28744),Q=r(93591),V=r(77537),K=r(32113),X=r(39771),$=r(15591),J=r(67489),ee=["amountToSupply","poolAddress","isWrongNetwork","sx","symbol","blocked","decimals","isWrappedBaseAsset"];function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne,se=a.memo((function(e){var t=e.amountToSupply,r=e.poolAddress,n=e.isWrongNetwork,o=e.sx,l=e.symbol,c=e.blocked,p=e.decimals,d=e.isWrappedBaseAsset,y=(0,W.Z)(e,ee),m=(0,v.Yh)((function(e){return[e.tryPermit,e.supply,e.supplyWithPermit,e.walletApprovalMethodPreference,e.estimateGasLimit,e.addTransaction,e.currentMarketData]})),b=(0,_.Z)(m,7),f=b[0],x=b[1],h=b[2],g=b[3],j=b[4],O=b[5],S=b[6],w=(0,i.vR)(),C=w.approvalTxState,P=w.mainTxState,A=w.loadingTxns,T=w.setLoadingTxns,k=w.setApprovalTxState,I=w.setMainTxState,Z=w.setGasLimit,D=w.setTxError,R=(0,z.n)(),N=R.refetchPoolData,M=R.refetchIncentiveData,U=R.refetchGhoData,te=f({reserveAddress:r,isWrappedBaseAsset:d}),ne=(0,V.Z)().sendTx,se=(0,a.useState)(),oe=se[0],ae=se[1],ie=(0,Q.y)(S,r),le=ie.data,ce=ie.refetch,ue=ie.isRefetching,pe=ie.isFetchedAfterMount;T(ue);var de=0!==Number(t)&&(0,E.iv)({approvedAmount:(null===le||void 0===le?void 0:le.amount)||"0",amount:t,signedAmount:oe?oe.amount:"0"});de&&null!==C&&void 0!==C&&C.success&&k({});var ye=te&&g===K.n.PERMIT,me=(0,G.M)({usePermit:ye,approvedAmount:le,requiresApproval:de,assetAddress:r,symbol:l,decimals:p,signatureAmount:t,onApprovalTxConfirmed:ce,onSignTxCompleted:function(e){return ae(e)}}).approval;(0,a.useEffect)((function(){pe||ce()}),[ce,pe]),(0,a.useEffect)((function(){var e=0;ye?e=Number(u.eB[F.UQ.supplyWithPermit].recommended):(e=Number(u.eB[F.UQ.supply].recommended),de&&!C.success&&(e+=Number(E.pQ))),Z(e.toString())}),[de,C,ye,Z]);var be=function(){var e=(0,L.Z)(q().mark((function e(){var n,s,o,a,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,I(re(re({},P),{},{loading:!0})),s=F.UQ.default,!ye||!oe){e.next=16;break}return s=F.UQ.supplyWithPermit,o=h({signature:oe.signature,amount:(0,Y.parseUnits)(t,p).toString(),reserve:r,deadline:oe.deadline}),e.next=8,j(o);case 8:return o=e.sent,e.next=11,ne(o);case 11:return n=e.sent,e.next=14,n.wait(1);case 14:e.next=26;break;case 16:return s=F.UQ.supply,a=x({amount:(0,Y.parseUnits)(t,p).toString(),reserve:r}),e.next=20,j(a);case 20:return a=e.sent,e.next=23,ne(a);case 23:return n=e.sent,e.next=26,n.wait(1);case 26:I({txHash:n.hash,loading:!1,success:!0}),O(n.hash,{action:s,txState:"success",asset:r,amount:t,assetName:l}),H.queryClient.invalidateQueries({queryKey:$.B.pool}),N&&N(),M&&M(),U&&U(),e.next=39;break;case 34:e.prev=34,e.t0=e.catch(0),i=(0,X.WG)(e.t0,X.aD.GAS_ESTIMATION,!1),D(i),I({txHash:void 0,loading:!1});case 39:case"end":return e.stop()}}),e,null,[[0,34]])})));return function(){return e.apply(this,arguments)}}();return(0,B.jsx)(J.B,re({blocked:c,mainTxState:P,approvalTxState:C,isWrongNetwork:n,requiresAmount:!0,amount:t,symbol:l,preparingTransactions:A||!le,actionText:(0,B.jsx)(s.cC,{id:"Supply {symbol}",values:{symbol:l}}),actionInProgressText:(0,B.jsx)(s.cC,{id:"Supplying {symbol}",values:{symbol:l}}),handleApproval:me,handleAction:be,requiresApproval:de,tryPermit:te,sx:o},y))})),oe=r(83454);function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.CAP_REACHED=0]="CAP_REACHED"}(ne||(ne={}));var le=a.memo((function(e){var t,r=e.underlyingAsset,n=e.poolReserve,o=e.userReserve,l=e.isWrongNetwork,c=e.nativeBalance,I=e.tokenBalance,Z=(0,w.HT)(),D=Z.marketReferencePriceInUsd,L=Z.user,_=(0,h.f)(),W=_.currentMarketData,U=_.currentNetworkConfig,q=(0,i.vR)(),F=q.mainTxState,Y=q.gasLimit,H=q.txError,z=(0,x.ov)(),G=z.supplyCap,Q=z.debtCeiling,V=(0,v.Yh)((function(e){return e.poolComputed.minRemainingBaseTokenBalance})),K=(0,a.useState)(""),X=K[0],$=K[1],J=r.toLowerCase()===u.hP.toLowerCase(),ee=J?c:I,te=n.supplyAPY,re=n.supplyCap,ne=n.totalLiquidity,ae=n.isFrozen,le=n.decimals,ce=n.debtCeiling,ue=n.isolationModeTotalDebt,pe=(0,a.useMemo)((function(){return(0,g.I)(ee,{supplyCap:re,totalLiquidity:ne,isFrozen:ae,decimals:le,debtCeiling:ce,isolationModeTotalDebt:ue},r,V)}),[ee,re,ne,ae,le,ce,ue,r,V]),de=new m.Z(X).multipliedBy(n.formattedPriceInMarketReferenceCurrency),ye=de.multipliedBy(D).shiftedBy(-p.$3),me=L?(0,d.hE)(L.totalCollateralMarketReferenceCurrency).plus(de):"-1",be=L?(0,d.hE)(L.totalCollateralMarketReferenceCurrency).multipliedBy(L.currentLiquidationThreshold).plus(de.multipliedBy(n.formattedReserveLiquidationThreshold)).dividedBy(me):"-1",fe=X===pe,xe=L?(0,d.hE)(L.healthFactor):"-1";L&&(!L.isInIsolationMode&&!n.isIsolated||L.isInIsolationMode&&(null===(t=L.isolatedReserve)||void 0===t?void 0:t.underlyingAsset)===n.underlyingAsset)&&(xe=(0,y.L1)({collateralBalanceMarketReferenceCurrency:me,borrowBalanceMarketReferenceCurrency:(0,d.hE)(L.totalBorrowsMarketReferenceCurrency),currentLiquidationThreshold:be}));var he=L.userReservesData.find((function(e){return e.usageAsCollateralEnabledOnUser&&e.reserve.id!==n.id})),ve=!L.isInIsolationMode&&n.isIsolated&&!he&&(!o||"0"===o.underlyingBalance||o.usageAsCollateralEnabledOnUser),ge={address:n.aTokenAddress,symbol:n.iconSymbol,decimals:n.decimals,aToken:!0},je=(0,E.yI)(o,L.totalCollateralUSD,L.isInIsolationMode,Q.isMaxed),Oe={amountToSupply:X,isWrongNetwork:l,poolAddress:J?u.hP:n.underlyingAsset,symbol:J?U.baseAssetSymbol:n.symbol,blocked:!1,decimals:n.decimals,isWrappedBaseAsset:n.isWrappedBaseAsset};return F.success?(0,B.jsx)(T.R,{action:(0,B.jsx)(s.cC,{id:"Supplied"}),amount:X,symbol:J?U.baseAssetSymbol:n.symbol,addToken:ge}):(0,B.jsxs)(B.Fragment,{children:[ve&&(0,B.jsx)(N.i,{asset:n.symbol}),G.determineWarningDisplay({supplyCap:G}),Q.determineWarningDisplay({debtCeiling:Q}),"AMPL"===n.symbol&&(0,B.jsx)(b.v,{sx:{mt:"16px",mb:"40px"},severity:"warning",children:(0,B.jsx)(f.v,{})}),"true"===oe.env.NEXT_PUBLIC_ENABLE_STAKING&&"YIELD"===n.symbol&&j.cr.staking(W)&&(0,B.jsx)(R,{}),"SNX"===n.symbol&&"0"!==pe&&(0,B.jsx)(M,{}),(0,B.jsx)(P.W,{value:X,onChange:function(e){if("-1"===e)$(pe);else{var t=(0,S.$w)(e,n.decimals);$(t)}},usdValue:ye.toString(10),symbol:J?U.baseAssetSymbol:n.symbol,assets:[{balance:pe,symbol:J?U.baseAssetSymbol:n.symbol,iconSymbol:J?U.baseAssetSymbol:n.iconSymbol}],capType:C.R.supplyCap,isMaxSelected:fe,disabled:F.loading,maxValue:pe,balanceText:(0,B.jsx)(s.cC,{id:"Wallet balance"}),event:{eventName:O.vh.MAX_INPUT_SELECTION,eventParams:{asset:n.underlyingAsset,assetName:n.name}}}),(0,B.jsxs)(k.m6,{gasLimit:Y,skipLoad:!0,disabled:0===Number(X),children:[(0,B.jsx)(k.oD,{description:(0,B.jsx)(s.cC,{id:"Supply APY"}),value:te,percent:!0}),(0,B.jsx)(k.aE,{incentives:n.aIncentivesData,symbol:n.symbol}),(0,B.jsx)(k.Bx,{collateralType:je}),(0,B.jsx)(k.jz,{visibleHfChange:!!X,healthFactor:L?L.healthFactor:"-1",futureHealthFactor:xe.toString(10)})]}),H&&(0,B.jsx)(A.Q,{txError:H}),(0,B.jsx)(se,ie({},Oe))]})}));function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ue=function(){var e=(0,i.vR)(),t=e.type,r=e.close,a=e.args;return(0,B.jsx)(l.P,{open:t===i.w8.Supply,setOpen:r,children:(0,B.jsx)(c.A,{action:"supply",title:(0,B.jsx)(s.cC,{id:"Supply"}),underlyingAsset:a.underlyingAsset,requiredPermission:o.g.DEPOSITOR,children:function(e){return(0,B.jsx)(le,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}})})}},18384:function(e,t,r){r.d(t,{i:function(){return i}});var n=r(49501),s=r(29630),o=r(69331),a=r(85893),i=function(e){var t=e.asset,r=e.severity;return(0,a.jsxs)(o.v,{severity:r||"info",sx:{mb:3},children:[(0,a.jsx)(s.Z,{variant:"subheader1",mb:.5,children:(0,a.jsx)(n.cC,{id:"You are entering Isolation mode"})}),(0,a.jsx)(s.Z,{children:(0,a.jsx)(n.cC,{id:"In Isolation mode, you cannot supply other assets as collateral. A global debt ceiling limits the borrowing power of the isolated asset. To exit isolation mode disable {0} as collateral before borrowing another asset. Read more in our",values:{0:t||""}})})]})}},28744:function(e,t,r){r.d(t,{M:function(){return v}});var n=r(59499),s=r(50029),o=r(17674),a=r(87794),i=r.n(a),l=r(75331),c=r(80854),u=r(21046),p=r(56371),d=r(89291),y=r(77537),m=r(16376),b=r(39771),f=r(8195);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e){var t=e.usePermit,r=e.approvedAmount,n=e.requiresApproval,a=e.assetAddress,x=e.symbol,v=e.decimals,g=e.signatureAmount,j=e.onApprovalTxConfirmed,O=e.onSignTxCompleted,S=(0,m.Yh)((function(e){return[e.generateApproval,e.generateSignatureRequest,e.estimateGasLimit,e.addTransaction]})),w=(0,o.Z)(S,4),C=w[0],P=w[1],A=w[2],T=w[3],k=(0,y.Z)(),E=k.signTxData,I=k.sendTx,Z=(0,f.vR)(),D=Z.approvalTxState,B=Z.setApprovalTxState,R=Z.setTxError,N=function(){var e=(0,s.Z)(i().mark((function e(){var s,o,y,m,f,S;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n||!r){e.next=30;break}if(!t){e.next=16;break}return B(h(h({},D),{},{loading:!0})),s=Math.floor(Date.now()/1e3+3600).toString(),e.next=7,P(h(h({},r),{},{deadline:s,amount:"-1"===g?u.Bz.toString():(0,p.parseUnits)(g,v).toString()}));case 7:return o=e.sent,e.next=10,E(o);case 10:y=e.sent,O&&O({signature:y,deadline:s,amount:g}),R(void 0),B({txHash:d.Z,loading:!1,success:!0}),e.next=30;break;case 16:return m=C(r),B(h(h({},D),{},{loading:!0})),e.next=20,A(m);case 20:return m=e.sent,e.next=23,I(m);case 23:return f=e.sent,e.next=26,f.wait(1);case 26:B({txHash:f.hash,loading:!1,success:!0}),R(void 0),T(f.hash,{action:l.UQ.approval,txState:"success",asset:a,amount:c.ke,assetName:x}),j&&j();case 30:e.next=37;break;case 32:e.prev=32,e.t0=e.catch(0),S=(0,b.WG)(e.t0,b.aD.GAS_ESTIMATION,!1),R(S),B({txHash:void 0,loading:!1});case 37:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();return{approval:N}}},93591:function(e,t,r){r.d(t,{y:function(){return i}});var n=r(36492),s=r(16376),o=r(15591),a=r(21422),i=function(e,t){var r=(0,a.z)().approvedAmountService,i=(0,s.Yh)((function(e){return e.account}));return(0,n.a)({queryFn:function(){return r.getPoolApprovedAmount(e,i,t)},queryKey:o.B.poolApprovedAmount(i,t,e),enabled:!!i,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}},94847:function(e,t,r){r.d(t,{x:function(){return i},I:function(){return l}});var n=r(80854),s=r(1279),o=r(70794),a=r(87385);function i(e,t){return"0"===e?new o.Z(-1):new o.Z(e).minus(t)}function l(e,t,r,l){if(t.isFrozen)return"0";var c=(0,s.hE)(e);return c.gt(0)&&r.toLowerCase()===n.hP.toLowerCase()&&(c=c.minus(l)),"0"!==t.supplyCap&&(c=o.Z.min(c,i(t.supplyCap,t.totalLiquidity))),c.lte(0)?"0":(0,a.$w)(c.toString(10),t.decimals)}},7687:function(e,t,r){r.d(t,{r:function(){return p}});var n=r(67294),s=r(464),o=r(30081),a=r(91784),i=r(85945),l=r(37122),c=r(13588),u=r(38381);function p(e,t){const r=(0,i.NL)({context:e.context}),p=(0,l.S)(),d=(0,a._)(),y=r.defaultQueryOptions(e);y._optimisticResults=p?"isRestoring":"optimistic",y.onError&&(y.onError=o.V.batchCalls(y.onError)),y.onSuccess&&(y.onSuccess=o.V.batchCalls(y.onSuccess)),y.onSettled&&(y.onSettled=o.V.batchCalls(y.onSettled)),(0,u.Fb)(y),(0,c.pf)(y,d),(0,c.JN)(d);const[m]=n.useState((()=>new t(r,y))),b=m.getOptimisticResult(y);if((0,s.$)(n.useCallback((e=>p?()=>{}:m.subscribe(o.V.batchCalls(e))),[m,p]),(()=>m.getCurrentResult()),(()=>m.getCurrentResult())),n.useEffect((()=>{m.setOptions(y,{listeners:!1})}),[y,m]),(0,u.SB)(y,b,p))throw(0,u.j8)(y,m,d);if((0,c.KJ)({result:b,errorResetBoundary:d,useErrorBoundary:y.useErrorBoundary,query:m.getCurrentQuery()}))throw b.error;return y.notifyOnChangeProps?b:m.trackResult(b)}},36492:function(e,t,r){r.d(t,{a:function(){return a}});var n=r(32161),s=r(52924),o=r(7687);function a(e,t,r){const a=(0,n._v)(e,t,r);return(0,o.r)(a,s.z)}}}]);