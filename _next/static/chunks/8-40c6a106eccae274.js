"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8],{76920:function(e,r,t){var n,i,s=t(67294);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o.apply(this,arguments)}r.Z=function(e){return s.createElement("svg",o({viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.78.628a.6.6 0 0 1 .42.572v3h2.4a.6.6 0 0 1 .492.944l-4.2 6A.6.6 0 0 1 4.8 10.8v-3H2.4a.6.6 0 0 1-.492-.944l4.2-6A.6.6 0 0 1 6.78.628Z",fill:"url(#lightningBoltGradient_svg__a)"})),i||(i=s.createElement("defs",null,s.createElement("linearGradient",{id:"lightningBoltGradient_svg__a",x1:10.2,y1:4.672,x2:1.345,y2:7.335,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#fed087"}),s.createElement("stop",{offset:1,stopColor:"#fed087"})))))}},60008:function(e,r,t){t.d(r,{Fy:function(){return P},_h:function(){return i}});var n,i,s=t(49501),o=t(48949),a=t(80227),l=t(29630),d=t(81645),c=t(61953),u=t(67294),x=t(41024),m=t(92391),h=t(69331),j=t(34220),E=t(43478),p=t(8195),v=t(46930),g=t(77537),b=t(25298),f=t(76920),I=t(63491),C=t(67916),y=t(93608),S=t(57824),O=t(78944),N=t(10343),Z=t(50029),T=t(87794),_=t.n(T),M=t(75331),A=t(89291),D=t(8656),w=t(67489),L=t(32667),F=t(85893),k=function(e){var r=e.isWrongNetwork,t=e.blocked,n=e.selectedEmode,i=e.activeEmode,o=e.eModes,a=(0,D.Yh)((function(e){return e.setUserEMode})),l=(0,A.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,Z.Z)(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(n));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:t,deps:[n],protocolAction:M.UQ.setEModeUsage,eventTxInfo:{previousState:(0,L.U)(o[i].label),newState:(0,L.U)(o[n].label)}}),d=l.action,c=l.loadingTxns,u=l.mainTxState,x=l.requiresApproval;return(0,F.jsx)(w.B,{requiresApproval:x,blocked:t,mainTxState:u,preparingTransactions:c,handleAction:d,actionText:0===i?(0,F.jsx)(s.cC,{id:"Enable E-Mode"}):0!==n?(0,F.jsx)(s.cC,{id:"Switch E-Mode"}):(0,F.jsx)(s.cC,{id:"Disable E-Mode"}),actionInProgressText:0===i?(0,F.jsx)(s.cC,{id:"Enabling E-Mode"}):0!==n?(0,F.jsx)(s.cC,{id:"Switching E-Mode"}):(0,F.jsx)(s.cC,{id:"Disabling E-Mode"}),isWrongNetwork:r})},B=t(4535),U=t(55343),R=t(31538),W=t(92012),H=function(e){var r=e.emodeCategories,t=e.selectedEmode,n=e.setSelectedEmode,i=e.userEmode;return(0,F.jsxs)(U.Z,{sx:{mb:1,width:"100%"},children:[(0,F.jsx)(B.Z,{sx:{mb:1,color:"text.secondary"},children:(0,F.jsx)(s.cC,{id:"Asset category"})}),(0,F.jsx)(W.Z,{defaultValue:0,value:t,onChange:function(e){n(r[Number(e.target.value)])},className:"EmodeSelect","data-cy":"EmodeSelect",sx:{width:"100%",height:"44px",borderRadius:"6px",borderColor:"divider",outline:"none !important",color:"text.primary",".MuiOutlinedInput-input":{backgroundColor:"transparent"},".MuiOutlinedInput-notchedOutline, .MuiOutlinedInput-notchedOutline":{borderColor:"divider",outline:"none !important",borderWidth:"1px"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"divider",borderWidth:"1px"},"&.EmodeSelect .MuiSelect-icon":{color:"text.primary"}},native:!1,renderValue:function(e){return 0!==e?(0,F.jsx)(l.Z,{color:"text.primary",children:(0,L.U)(r[e].label)}):(0,F.jsx)(l.Z,{color:"text.muted",children:(0,F.jsx)(s.cC,{id:"Select"})})},children:Object.keys(r).map((function(e){if(i!==Number(e)&&0!==Number(e))return(0,F.jsx)(R.Z,{value:r[Number(e)].id,children:(0,F.jsx)(l.Z,{color:"text.primary",children:(0,L.U)(r[Number(e)].label)})},"emode-".concat(r[Number(e)].id))}))})]})};!function(e){e[e.EMODE_DISABLED_LIQUIDATION=0]="EMODE_DISABLED_LIQUIDATION",e[e.CLOSE_POSITIONS_BEFORE_SWITCHING=1]="CLOSE_POSITIONS_BEFORE_SWITCHING"}(n||(n={})),function(e){e.ENABLE="Enable",e.DISABLE="Disable",e.SWITCH="Switch"}(i||(i={}));var P=function(e){var r=e.mode,t=(0,j.HT)(),Z=t.user,T=t.reserves,_=t.eModes,M=t.marketReferenceCurrencyDecimals,A=t.marketReferencePriceInUsd,D=t.userReserves,w=(0,v.f)().currentChainId,B=(0,g.Z)(),U=B.chainId,R=B.readOnlyModeAddress,W=(0,E.p)(1),P=(0,p.vR)(),V=P.gasLimit,G=P.mainTxState,Q=P.txError,q=(0,u.useState)(function(e,r,t){var n=Object.keys(r).length;if(e===i.ENABLE){if(n>2)return;return r[1]}if(e===i.SWITCH){if(n>3)return;return 1===t?r[2]:r[1]}return r[0]}(r,_,Z.userEmodeCategoryId)),z=q[0],X=q[1],Y=(0,b.Mo)(w),J=(0,o.G)({currentTimestamp:W,userReserves:D,formattedReserves:T,userEmodeCategoryId:z?z.id:0,marketReferenceCurrencyDecimals:M,marketReferencePriceInUsd:A}),K=void 0;if(Z.isInEmode&&0===(null===z||void 0===z?void 0:z.id))Number(J.healthFactor)<1.01&&"-1"!==J.healthFactor&&(K=n.EMODE_DISABLED_LIQUIDATION);else if(z&&Z.userEmodeCategoryId!==(null===z||void 0===z?void 0:z.id)){Z.userReservesData.some((function(e){return(Number(e.scaledVariableDebt)>0||Number(e.principalStableDebt)>0)&&e.reserve.eModeCategoryId!==(null===z||void 0===z?void 0:z.id)}))&&(K=n.CLOSE_POSITIONS_BEFORE_SWITCHING)}var $=function(){switch(K){case n.CLOSE_POSITIONS_BEFORE_SWITCHING:return(0,F.jsx)(h.v,{severity:"info",sx:{mt:6,alignItems:"center"},children:(0,F.jsx)(l.Z,{variant:"caption",children:(0,F.jsx)(s.cC,{id:"To enable E-mode for the {0} category, all borrow positions outside of this category must be closed.",values:{0:z&&(0,L.U)(z.label)}})})});case n.EMODE_DISABLED_LIQUIDATION:return(0,F.jsxs)(h.v,{severity:"error",sx:{mt:6,alignItems:"center"},children:[(0,F.jsx)(l.Z,{variant:"subheader1",color:"#4F1919",children:(0,F.jsx)(s.cC,{id:"Cannot disable E-Mode"})}),(0,F.jsx)(l.Z,{variant:"caption",children:(0,F.jsx)(s.cC,{id:"You can not disable E-Mode as your current collateralization level is above 80%, disabling E-Mode can cause liquidation. To exit E-Mode supply or repay borrowed positions."})})]});default:return null}},ee=Object.keys(_).length>=3&&r===i.ENABLE||Object.keys(_).length>=4&&r===i.SWITCH,re=w!==U,te=function(){return(0,F.jsx)(d.Z,{color:"primary",sx:{fontSize:"14px",mx:1},children:(0,F.jsx)(a.Z,{})})},ne=!!z&&0===z.id&&void 0===K&&Number(J.healthFactor).toFixed(3)<Number(Z.healthFactor).toFixed(3),ie="0"!==Z.currentLoanToValue&&Number(J.currentLoanToValue).toFixed(3)!=Number(Z.currentLoanToValue).toFixed(3);return Q&&Q.blocking?(0,F.jsx)(I.D,{txError:Q}):G.success?(0,F.jsx)(y.R,{action:(0,F.jsx)(s.cC,{id:"Emode"})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(O.E,{title:"".concat(r," E-Mode")}),re&&!R&&(0,F.jsx)(N.I,{networkName:Y.name,chainId:w}),0===Z.userEmodeCategoryId&&(0,F.jsx)(h.v,{severity:"warning",children:(0,F.jsx)(l.Z,{variant:"caption",children:(0,F.jsx)(s.cC,{id:"Enabling E-Mode only allows you to borrow assets belonging to the selected category."})})}),ee&&(0,F.jsx)(H,{emodeCategories:_,selectedEmode:null===z||void 0===z?void 0:z.id,setSelectedEmode:X,userEmode:Z.userEmodeCategoryId}),K===n.EMODE_DISABLED_LIQUIDATION&&(0,F.jsx)($,{}),ne&&(0,F.jsxs)(h.v,{severity:"error",sx:{mt:6,alignItems:"center"},children:[(0,F.jsx)(l.Z,{variant:"subheader1",color:"#4F1919",children:(0,F.jsx)(s.cC,{id:"Liquidation risk"})}),(0,F.jsx)(l.Z,{variant:"caption",children:(0,F.jsx)(s.cC,{id:"This action will reduce your health factor. Please be mindful of the increased risk of collateral liquidation."})})]}),(0,F.jsxs)(S.m6,{gasLimit:V,children:[!ee&&(0,F.jsx)(m.X,{caption:(0,F.jsx)(s.cC,{id:"E-Mode category"}),captionVariant:"description",mb:4,children:(0,F.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"right",alignItems:"center"},children:[(0,F.jsx)(c.Z,{sx:{display:"inline-flex",alignItems:"center",mx:1},children:0!==Z.userEmodeCategoryId?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(d.Z,{sx:{fontSize:"12px"},children:(0,F.jsx)(f.Z,{})}),(0,F.jsx)(l.Z,{variant:"subheader1",children:(0,L.U)(_[Z.userEmodeCategoryId].label)})]}):(0,F.jsx)(l.Z,{variant:"subheader1",children:(0,F.jsx)(s.cC,{id:"None"})})}),z&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(te,{}),(0,F.jsx)(c.Z,{sx:{display:"inline-flex",alignItems:"center"},children:0!==z.id?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(d.Z,{sx:{fontSize:"12px",mr:.5},children:(0,F.jsx)(f.Z,{})}),(0,F.jsx)(l.Z,{variant:"subheader1",children:(0,L.U)(_[z.id].label)})]}):(0,F.jsx)(l.Z,{variant:"subheader1",children:(0,F.jsx)(s.cC,{id:"None"})})})]})]})}),(0,F.jsx)(m.X,{caption:(0,F.jsx)(s.cC,{id:"Available assets"}),captionVariant:"description",mb:4,sx:{alignContent:"flex-end"},children:(0,F.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"right",alignItems:"center"},children:[_[Z.userEmodeCategoryId]&&(0,F.jsx)(c.Z,{sx:{display:"flex",alignItems:"center",textAlign:"end"},children:0!==Z.userEmodeCategoryId?(0,F.jsx)(l.Z,{sx:{textAlign:"end"},children:_[Z.userEmodeCategoryId].assets.join(", ")}):(0,F.jsx)(l.Z,{children:(0,F.jsx)(s.cC,{id:"All Assets"})})}),z&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(te,{}),(0,F.jsx)(c.Z,{sx:{display:"flex",alignItems:"center",textAlign:"end"},children:0!==(null===z||void 0===z?void 0:z.id)?(0,F.jsx)(l.Z,{sx:{textAlign:"end"},children:z.assets.join(", ")}):(0,F.jsx)(l.Z,{children:(0,F.jsx)(s.cC,{id:"All Assets"})})})]})]})}),(0,F.jsx)(S.jz,{visibleHfChange:!!z,healthFactor:Z.healthFactor,futureHealthFactor:J.healthFactor}),ie&&(0,F.jsx)(m.X,{caption:(0,F.jsx)(s.cC,{id:"Maximum loan to value"}),captionVariant:"description",mb:4,align:"flex-start",children:(0,F.jsx)(c.Z,{sx:{textAlign:"right"},children:(0,F.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,F.jsx)(x.B,{value:Z.currentLoanToValue,sx:{color:"text.primary"},visibleDecimals:2,compact:!0,percent:!0,variant:"secondary14"}),void 0!==z&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(te,{}),(0,F.jsx)(x.B,{value:J.currentLoanToValue,sx:{color:"text.primary"},visibleDecimals:2,compact:!0,percent:!0,variant:"secondary14"})]})]})})})]}),K===n.CLOSE_POSITIONS_BEFORE_SWITCHING&&(0,F.jsx)($,{}),Q&&(0,F.jsx)(C.Q,{txError:Q}),(0,F.jsx)(k,{isWrongNetwork:re,blocked:void 0!==K||!z,selectedEmode:(null===z||void 0===z?void 0:z.id)||0,activeEmode:Z.userEmodeCategoryId,eModes:_})]})}}}]);